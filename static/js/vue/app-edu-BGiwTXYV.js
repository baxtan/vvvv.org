import{C as r,c as i,s as f}from"./app-business-Dncwq2rW.js";import{d as c}from"./app-vendor-Cnr6Sbkk.js";const _=c("edus",{state:()=>({items:[],total:null,fetched:!1}),actions:{async fetch(t=!1){if(!(this.fetched&&!t))try{const{items:e,total:o}=await u();this.items=e,this.total=o,this.fetched=!0}catch{this.fetched=!1}}}});async function u(){const t="?withoutEnlargement=true&quality=90&fit=cover&height=40",e=r.GET_EDUS+"?fields[]=name,logo&meta=filter_count",o=8,s=await fetch(e);if(s.ok){const n=await s.json(),l=n.data?.map(a=>({img:a.logo?i(a.logo)+t:null,url:"/edu/"+a.name,text:a.name}));return{items:f(l).slice(0,o),total:n.meta?.filter_count??0}}else throw Error("Connection error")}const p=c("eduList",{state:()=>({items:[],total:null,fetched:!1}),actions:{async fetch(t=!1){if(!(this.fetched&&!t))try{const{items:e,total:o}=await m();this.items=e,this.total=o,this.fetched=!0}catch{this.fetched=!1}}}}),h=r.GET_EDUS+"?fields=*&sort=name&meta=filter_count",d="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";async function m(){const t=await fetch(h);if(t.ok){const e=await t.json(),o=e.data;return o.forEach(s=>{s.logo=E(s.logo)}),{items:o,total:e.meta?.filter_count??0}}else throw new Error("Connection Error")}function E(t){return t?`${r.ASSETS}${t}?${d}`:null}const w="?withoutEnlargement=true&quality=90&fit=cover&width=120",g=r.BASEURL+"items/Edu?fields=*,social.*,owner.username&filter[name][_eq]=";async function L(t){const e=g+t,o=await fetch(e),s=await o.json();if(o.ok){if(s.data.length==0)throw"Can't find a profile for this Educational Institution";const n={...s.data[0]};return n.logo=n?.logo?i(n.logo)+w:null,n}else throw new Error("Can't load Profile")}export{p as a,L as f,_ as u};
