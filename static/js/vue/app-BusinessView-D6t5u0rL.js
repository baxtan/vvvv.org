import{a3 as _,a4 as f,a8 as h,ac as v,aj as w}from"./app.js";import{_ as g,a as y}from"./app-InstitutionBasics-aU4B-EAC.js";import{r as u,l as R,N as k,P as U,u as l,o as n,c as d,a1 as m,b as r,Q as p}from"./app-vue-BkvlpQbN.js";import"./app-icons-B71ntucG.js";import"./app-lodash-Cpj98o6Y.js";import"./app-SocialView-C78kmxIf.js";import"./app-Internships-C5m6OpV6.js";const b="?withoutEnlargement=true&quality=98&fit=cover&width=300&format=png",B=f.BASEURL+"items/Company?fields=*,social.*,owner.username,people.User_Role_id.role,people.User_Role_id.user_id.username&filter[slug][_eq]=";async function C(i){const c=B+i,t=await fetch(c);if(t.ok){const o=await t.json();if(o.data.length==0)throw"Can't find a profile for this company";const e={...o.data[0]};return console.log(e.people),e.people=e.people.filter(s=>s.User_Role_id.user_id!==null),e.people=e.people.map(s=>({role:s.User_Role_id.role,username:s.User_Role_id.user_id.username,link:"/people/"+s.User_Role_id.user_id.username})),e.logo=e?.logo?_(e.logo)+b:null,e}else throw new Error("Can't load Profile")}const A={key:0},E={class:"row"},M={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},N={key:0,class:"col-12 col-md-6 col-lg-8 mt-0 mt-md-3 mt-md-0 profileContent"},P=["innerHTML"],$={__name:"BusinessView",setup(i){const t=h().params?.slug??"vvvv",o=u(null),e=u(!1);let s;return R(async()=>{window.scrollTo({top:0,left:0,behavior:"smooth"});try{e.value=!0,o.value=await C(t),document.title="Profile: "+o.value.name,s=v(o.value.description)}catch(a){console.log(a),a.value="Something went wrong or maybe a business you are looking for is simply not yet confirmed."}finally{e.value=!1}}),(a,L)=>(n(),k(l(w),{show:e.value},{default:U(()=>[o.value?(n(),d("div",A,[r("div",E,[r("div",M,[p(g,{class:"mb-3",data:o.value},null,8,["data"])]),l(s)?(n(),d("div",N,[r("p",{innerHTML:l(s)},null,8,P),p(y,{class:"maintained mt-4 pt-3 border-top d-block d-md-none",data:o.value.owner},null,8,["data"])])):m("",!0)])])):m("",!0)]),_:1},8,["show"]))}};export{$ as default};
