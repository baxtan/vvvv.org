import{a1 as _,r as i,aa as y,ab as B,a5 as C,Z as l,ac as m,$ as e,ae as d,H as S,ag as w,a4 as r,ak as E,al as F,_ as o,aq as R,aj as b,a2 as k}from"./app.js";import{_ as N}from"./Location.js";import"./LocationOutline.js";const Q=_.BASEURL+"items/Company?fields=*&sort=name&meta=filter_count",U="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";function Z(s){return s?`${_.ASSETS}${s}?${U}`:null}async function I(s,a,c){try{const t=await(await fetch(Q)).json();s.value=t.data,s.value.forEach(A=>{A.logo=Z(A.logo)}),a.value=t.meta.filter_count,a.value>0&&c("setCount",a.value)}catch{console.log("error")}}const L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFeXl5AAAAa7+IbgAAAFhJREFUeNrswQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFgAAQYAAQ8AAbQIco0AAAAASUVORK5CYII=",V={key:0,class:"businesses"},G={class:"row"},T=["onClick"],$={class:"company"},J={class:"logo"},O=["src"],D={class:"name"},W="col-12 col-sm-6 col-md-4 col-lg-3 my-2",K={__name:"BusinessList",emits:["setCount"],setup(s,{emit:a}){const c=a;F();const n=i(null),t=i(0),A=i(!0);return y(async()=>{A.value=!0,I(n,t,c),A.value=!1}),(f,Y)=>(o(),B(r(E),{show:A.value},{default:C(()=>[A.value?m("",!0):(o(),l("div",V,[e("p",null,"A list of "+d(t.value)+" businesses that use vvvv.",1),e("div",G,[(o(!0),l(S,null,w(n.value,({name:u,description:j,logo:h,location_city:g,location_country:p})=>(o(),l("div",{"track-by":"name",class:R(W)},[e("div",{class:"companyCard p-3",onClick:v=>r(b)(u,v)},[e("div",$,[e("div",J,[f.profilepic!==null?(o(),l("img",{key:0,src:h||r(L)},null,8,O)):m("",!0)]),e("p",D,d(u),1),k(N,{location:{city:g,country:p}},null,8,["location"])])],8,T)]))),256))])]))]),_:1},8,["show"]))}};export{K as default};
