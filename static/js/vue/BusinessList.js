import{aI as g,ag as h,r as v,aq as w,ar as C,aB as f,an as S,ai as k,aj as a,aF as L,ac as n,ab as r,ao as i,ad as c,ax as d,M as B,az as E,aJ as b,ah as N}from"./app.js";import{d as q}from"./defaultLogo.js";import{_ as x}from"./Location.js";import"./LocationOutline.js";const V=g("companyList",{state:()=>({items:[],total:null,fetched:!1}),actions:{async fetch(s=!1){if(!(this.fetched&&!s))try{const{items:t,total:o}=await R();this.items=t,this.total=o,this.fetched=!0}catch{this.fetched=!1}}}}),$=h.BASEURL+"items/Company?fields=*&sort=name&meta=filter_count",j="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";function A(s){return s?`${h.ASSETS}${s}?${j}`:null}async function R(){const s=await fetch($);if(s.ok){const t=await s.json(),o=t.data;return o.forEach(e=>{e.logo=A(e.logo)}),{items:o,total:t.meta?.filter_count??0}}else throw Error("Connection Error")}const T={key:0,class:"logoListView"},z={key:0},F={class:"row"},G=["onClick"],I={class:"company"},M={class:"logo"},O=["src"],U={class:"name"},D="col-12 col-sm-6 col-md-4 col-lg-3 my-2",X={__name:"BusinessList",setup(s){const t=v(!0),o=C(),e=V();return w(async()=>{if(o.query.b){f(o.query.b);return}try{t.value=!0,await e.fetch()}catch(l){console.log(l)}finally{t.value=!1}}),(l,J)=>(n(),S(a(L),{show:t.value},{default:k(()=>[!t.value&&a(e)?(n(),r("div",T,[a(e).total>0?(n(),r("p",z,"A list of "+d(a(e).total)+" businesses that use vvvv.",1)):i("",!0),c("div",F,[(n(!0),r(B,null,E(a(e).items,({name:u,description:P,logo:m,location_city:_,location_country:p})=>(n(),r("div",{"track-by":"name",class:b(D)},[c("div",{class:"companyCard p-3",onClick:y=>a(f)(u,y)},[c("div",I,[c("div",M,[m!==null?(n(),r("img",{key:0,src:m||a(q)},null,8,O)):i("",!0)]),c("p",U,d(u),1),N(x,{location:{city:_,country:p}},null,8,["location"])])],8,G)]))),256))])])):i("",!0)]),_:1},8,["show"]))}};export{X as default};
