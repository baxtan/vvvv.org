import{aE as p,ag as d,r as y,as as g,ah as v,ai as w,ak as o,aB as C,ac as a,ab as c,an as r,ad as i,au as m,M as k,aw as S,aF as L,aD as E,aj as B}from"./app.js";import{d as N}from"./defaultLogo.js";import{_ as V}from"./Location.js";import"./LocationOutline.js";const $=p("companyList",{state:()=>({items:[],total:null,fetched:!1}),actions:{async fetch(e=!1){if(!(this.fetched&&!e))try{const{items:t,total:s}=await A();this.items=t,this.total=s,this.fetched=!0}catch{this.fetched=!1}}}}),b=d.BASEURL+"items/Company?fields=*&sort=name&meta=filter_count",j="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";function x(e){return e?`${d.ASSETS}${e}?${j}`:null}async function A(){const e=await fetch(b);if(e.ok){const t=await e.json(),s=t.data;return s.forEach(n=>{n.logo=x(n.logo)}),{items:s,total:t.meta?.filter_count??0}}else throw Error("Connection Error")}const T={key:0,class:"logoListView"},D={key:0},F={class:"row"},G=["onClick"],M={class:"company"},O={class:"logo"},R=["src"],U={class:"name"},q="col-12 col-sm-6 col-md-4 col-lg-3 my-2",Q={__name:"BusinessList",setup(e){const t=y(!0),s=$();return g(async()=>{try{t.value=!0,await s.fetch()}catch(n){console.log(n)}finally{t.value=!1}}),(n,z)=>(a(),v(o(C),{show:t.value},{default:w(()=>[!t.value&&o(s)?(a(),c("div",T,[o(s).total>0?(a(),c("p",D,"A list of "+m(o(s).total)+" businesses that use vvvv.",1)):r("",!0),i("div",F,[(a(!0),c(k,null,S(o(s).items,({name:l,description:I,logo:u,location_city:f,location_country:h})=>(a(),c("div",{"track-by":"name",class:L(q)},[i("div",{class:"companyCard p-3",onClick:_=>o(E)(l,_)},[i("div",M,[i("div",O,[u!==null?(a(),c("img",{key:0,src:u||o(N)},null,8,R)):r("",!0)]),i("p",U,m(l),1),B(V,{location:{city:f,country:h}},null,8,["location"])])],8,G)]))),256))])])):r("",!0)]),_:1},8,["show"]))}};export{Q as default};
