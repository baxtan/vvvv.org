import{a5 as _,r as i,af as y,ag as B,a9 as C,a8 as r,ah as S,ai as w,a2 as o,a1 as l,aj as m,a3 as a,ak as d,H as E,am as F,an as R,al as k,a6 as b}from"./app.js";import{_ as N}from"./Location.js";import"./LocationOutline.js";const Q=_.BASEURL+"items/Company?fields=*&sort=name&meta=filter_count",U="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";function I(s){return s?`${_.ASSETS}${s}?${U}`:null}async function L(s,e,c){try{const t=await(await fetch(Q)).json();s.value=t.data,s.value.forEach(A=>{A.logo=I(A.logo)}),e.value=t.meta.filter_count,e.value>0&&c("setCount",e.value)}catch{console.log("error")}}const V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFeXl5AAAAa7+IbgAAAFhJREFUeNrswQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFgAAQYAAQ8AAbQIco0AAAAASUVORK5CYII=",Z={key:0,class:"businesses"},G={class:"row"},T=["onClick"],J={class:"company"},O={class:"logo"},$=["src"],D={class:"name"},W="col-12 col-sm-6 col-md-4 col-lg-3 my-2",M={__name:"BusinessList",emits:["setCount"],setup(s,{emit:e}){const c=e;w();const n=i(null),t=i(0),A=i(!0);return y(async()=>{A.value=!0,L(n,t,c),A.value=!1}),(f,Y)=>(o(),B(r(S),{show:A.value},{default:C(()=>[A.value?m("",!0):(o(),l("div",Z,[a("p",null,"A list of "+d(t.value)+" businesses that use vvvv.",1),a("div",G,[(o(!0),l(E,null,F(n.value,({name:u,description:j,logo:h,location_city:g,location_country:p})=>(o(),l("div",{"track-by":"name",class:R(W)},[a("div",{class:"companyCard p-3",onClick:v=>r(k)(u,v)},[a("div",J,[a("div",O,[f.profilepic!==null?(o(),l("img",{key:0,src:h||r(V)},null,8,$)):m("",!0)]),a("p",D,d(u),1),b(N,{location:{city:g,country:p}},null,8,["location"])])],8,T)]))),256))])]))]),_:1},8,["show"]))}};export{M as default};
