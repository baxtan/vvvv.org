import{ae as _,r as i,an as y,ao as B,ai as C,aa as l,ap as m,ac as a,ar as d,M as S,at as w,ah as r,ax as E,ay as F,ab as o,az as R,aw as b,af as k}from"./app.js";import{_ as N}from"./Location.js";import"./LocationOutline.js";const Q=_.BASEURL+"items/Company?fields=*&sort=name&meta=filter_count",U="withoutEnlargement=true&fit=inside&height=50&quality=90&format=auto";function I(s){return s?`${_.ASSETS}${s}?${U}`:null}async function L(s,e,c){try{const t=await(await fetch(Q)).json();s.value=t.data,s.value.forEach(A=>{A.logo=I(A.logo)}),e.value=t.meta.filter_count,e.value>0&&c("setCount",e.value)}catch{console.log("error")}}const V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFeXl5AAAAa7+IbgAAAFhJREFUeNrswQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFgAAQYAAQ8AAbQIco0AAAAASUVORK5CYII=",Z={key:0,class:"businesses"},G={class:"row"},T=["onClick"],J={class:"company"},O={class:"logo"},$=["src"],x={class:"name"},D="col-12 col-sm-6 col-md-4 col-lg-3 my-2",P={__name:"BusinessList",emits:["setCount"],setup(s,{emit:e}){const c=e;F();const n=i(null),t=i(0),A=i(!0);return y(async()=>{A.value=!0,L(n,t,c),A.value=!1}),(f,M)=>(o(),B(r(E),{show:A.value},{default:C(()=>[A.value?m("",!0):(o(),l("div",Z,[a("p",null,"A list of "+d(t.value)+" businesses that use vvvv.",1),a("div",G,[(o(!0),l(S,null,w(n.value,({name:u,description:W,logo:h,location_city:p,location_country:g})=>(o(),l("div",{"track-by":"name",class:R(D)},[a("div",{class:"companyCard p-3",onClick:v=>r(b)(u,v)},[a("div",J,[a("div",O,[f.profilepic!==null?(o(),l("img",{key:0,src:h||r(V)},null,8,$)):m("",!0)]),a("p",x,d(u),1),k(N,{location:{city:p,country:g}},null,8,["location"])])],8,T)]))),256))])]))]),_:1},8,["show"]))}};export{P as default};
