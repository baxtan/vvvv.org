import{aK as k,ad as F,r as f,ap as _,ac as w,ay as h,ae as i,an as c,af as r,as as n,ag as d,au as u,ah as m,ai as l,M as y,az as b,am as g,aA as N,av as p,al as H,aF as C}from"./app.js";import{_ as S}from"./app-Location-BVyiK7Ug.js";import{N as x}from"./app-PerformantEllipsis-BV2InR-3.js";import{N as E}from"./app-Space-eR7v4Yv8.js";import"./app-LocationOutline-DNQ6lrCI.js";const L=k("forHireList",{state:()=>({items:[],total:0,fetched:!1}),actions:{async fetch(a=!1){if(!(this.fetched&&!a))try{const{items:e,total:s}=await B();this.items=e,this.total=s,this.fetched=!0}catch{this.fetched=!1}}}}),A=F.GET_USERS+`?fields=*,related.social.contact,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value
&filter[related][hire][available][_eq]=true&sort=username&meta=filter_count`;async function B(){const a=await fetch(A),e=await a.json();if(a.ok)return{items:e.data.map(t=>{const o=[t.name,t.surname].filter(Boolean).join(" ");return{username:t.username,name:o??null,contact:t.related[0].social??null,location:{city:t.location_city,country:t.location_country},hire:t.related[0].hire??null}}),total:e.meta?.filter_count??0};throw Error("Connection Error")}const T={class:"imageContainer"},$=["src","alt"],j={class:"card-body"},M={class:"card-title"},O={class:"card-text"},U=["innerHTML"],V={key:0,class:"mt-2"},D={__name:"ForHireCard",props:{data:Object},setup(a){const e=f(null);return _(()=>{a.data.hire&&(e.value={description:h(a.data.hire.description),contact:a.data.hire.contact,skills_vvvv:h(a.data.hire.skills_vvvv),skills_other:h(a.data.hire.skills_other),image:a.data.hire.image?w(a.data.hire.image):null,availableFor:a.data.hire.availableFor?a.data.hire.availableFor.map(s=>s.AvailableFor_Options_id?s.AvailableFor_Options_id.value:""):[]})}),(s,t)=>e.value?(r(),i("div",{key:0,class:"card mb-5",onClick:t[0]||(t[0]=o=>l(H)(a.data.username,o))},[n("div",T,[e.value.image?(r(),i("img",{key:0,src:e.value.image,class:"card-img-top",alt:a.data.username},null,8,$)):c("",!0)]),n("div",j,[n("h4",M,u(a.data.username),1),n("p",O,u(a.data.title),1),d(l(x),{"line-clamp":"3",tooltip:"false"},{default:m(()=>[n("span",{innerHTML:e.value.skills_vvvv},null,8,U)]),_:1}),e.value.availableFor.length>0?(r(),i("div",V,[d(l(E),null,{default:m(()=>[(r(!0),i(y,null,b(e.value.availableFor,o=>(r(),g(l(N),{bordered:!1},{default:m(()=>[p(u(o),1)]),_:2},1024))),256))]),_:1})])):c("",!0),d(S,{location:a.data.location,class:"border-top pt-2 mt-3"},null,8,["location"])])])):c("",!0)}},P={key:0},q={key:0},z={class:"row"},Q={__name:"ForHireList",setup(a){const e=f(!0),s=L();return _(async()=>{try{e.value=!0,await s.fetch()}catch(t){console.log(t)}finally{e.value=!1}}),(t,o)=>(r(),g(l(C),{show:e.value},{default:m(()=>[!e.value&&l(s)?(r(),i("div",P,[l(s).total>0?(r(),i("p",q,u(l(s).total)+" professional vvvv users available for hire:",1)):c("",!0),n("div",z,[(r(!0),i(y,null,b(l(s).items,v=>(r(),i("div",{id:"UsersForHire",class:"col-md-6 col-lg-4 col-12",key:v.username},[d(D,{data:v},null,8,["data"])]))),128))])])):c("",!0)]),_:1},8,["show"]))}};export{Q as default};
