import{a9 as f,aa as v,ae as h,ai as w,ap as g}from"./app.js";import{_ as y,a as b}from"./app-InstitutionBasics-BpDx3bi5.js";import{r as u,l as R,N as k,P as U,u as n,o as r,c as m,a1 as p,b as a,Q as _}from"./app-vue-Chj5ZsMy.js";import"./app-icons-BdIiVwe_.js";import"./app-lodash-Cpj98o6Y.js";import"./app-SocialView-B5hL_7sQ.js";import"./app-Internships-B_ipUJgs.js";const B="?withoutEnlargement=true&quality=98&fit=cover&width=300&format=png",C=v.BASEURL+"items/Company?fields=*,social.*,owner.username,people.User_Role_id.role,people.User_Role_id.user_id.username&filter[slug][_eq]=";async function A(i){const c=C+i,t=await fetch(c);if(t.ok){const o=await t.json();if(o.data.length==0)throw"Can't find a profile for this company";const e={...o.data[0]};return e.people=e.people.filter(s=>s.User_Role_id.user_id!==null),e.people=e.people.map(s=>({role:s.User_Role_id.role,username:s.User_Role_id.user_id.username,link:"/people/"+s.User_Role_id.user_id.username})),e.logo=e?.logo?f(e.logo)+B:null,e}else throw new Error("Can't load Profile")}const E={key:0},M={class:"row"},N={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},P={key:0,class:"col-12 col-md-6 col-lg-8 mt-md-0 pt-md-0 profileContent"},x=["innerHTML"],$={__name:"BusinessView",setup(i){const t=h().params?.slug??"vvvv",o=u(null),e=u(!1);let s;return R(async()=>{window.scrollTo({top:0,left:0,behavior:"smooth"});try{e.value=!0,o.value=await A(t),document.title="Profile: "+o.value.name,s=w(o.value.description)}catch(l){console.log(l),l.value="Something went wrong or maybe a business you are looking for is simply not yet confirmed."}finally{e.value=!1}}),(l,d)=>(r(),k(n(g),{show:e.value},{default:U(()=>[o.value?(r(),m("div",E,[a("div",M,[a("div",N,[_(y,{class:"mb-3",data:o.value},null,8,["data"])]),n(s)?(r(),m("div",P,[d[0]||(d[0]=a("div",{class:"border-top d-flex d-md-none mt-2 mb-4"},null,-1)),a("p",{innerHTML:n(s)},null,8,x),_(b,{class:"maintained mt-4 pt-3 border-top d-block d-md-none",data:o.value.owner},null,8,["data"])])):p("",!0)])])):p("",!0)]),_:1},8,["show"]))}};export{$ as default};
