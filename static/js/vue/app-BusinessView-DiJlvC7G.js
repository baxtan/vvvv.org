import{G as v,H as y,r as f,a4 as _,c as w,h as c,K as d,o,g as n,F as p,l as b,t as h,j as u,a as g,b as m,ab as k,d as $,O as x,$ as B,f as j,s as C}from"./app-profile-DxpktdD5.js";import{_ as L,a as A}from"./app-LocationFull-D571nAbb.js";import{_ as E}from"./app-SocialView-CiFkk2eo.js";import{_ as H}from"./app-Internships-B2F17B46.js";const M="?withoutEnlargement=true&quality=90&fit=cover&width=120",P=y.BASEURL+"items/Company?fields=*,social.*,owner.username&filter[name][_eq]=";async function N(t){const l=P+t,s=await fetch(l);if(s.ok){const e=await s.json();if(e.data.length==0)throw"Can't find a profile for this company";const a={...e.data[0]};return a.logo=a?.logo?v(a.logo)+M:null,a}else throw new Error("Can't load Profile")}const R={key:0,class:"my-3 pt-2 border-top"},S={key:0,class:"mb-1"},V=["href"],U={__name:"Links",props:["data"],setup(t){const l=t,s=f([{name:"Contact",url:_(l.data.contact_url)},{name:"Projects",url:_(l.data.projects_url)},{name:"Jobs",url:_(l.data.jobs_url)}]),e=w(()=>s.value.some(a=>a.url!=null||""));return console.log(s),(a,i)=>e.value?(o(),c("div",R,[i[0]||(i[0]=n("p",{class:"text-muted mb-2"},"Direct links:",-1)),(o(!0),c(p,null,b(s.value,r=>(o(),c(p,{key:r.name},[r.url?(o(),c("p",S,[n("a",{href:r.url,target:"_blank"},h(r.name),9,V)])):d("",!0)],64))),128))])):d("",!0)}},q=["src"],D={class:"my-3"},F={__name:"InstitutionBasics",props:["data"],setup(t){return(l,s)=>(o(),c("div",null,[n("img",{src:t.data.logo||m(k),alt:"logo",class:"img-fluid"},null,8,q),n("div",D,[n("h5",null,h(t.data.name),1)]),u(L,{data:t.data},null,8,["data"]),Object.keys(t.data.social)>0?(o(),g(E,{key:0,class:"mt-4 mb-4 pt-3 border-top",social:t.data.social},null,8,["social"])):d("",!0),u(H,{data:t.data.internships,text:"Accepting internship applications"},null,8,["data"]),u(U,{class:"links",data:t.data},null,8,["data"]),u(A,{class:"maintained mt-4 pt-3 border-top",data:t.data.owner},null,8,["data"])]))}},G={key:0},I={class:"row"},O={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},T={key:0,class:"col-12 col-md-6 col-lg-8"},J=["innerHTML"],Y={__name:"BusinessView",setup(t){const s=$().params.name,e=f(null),a=f(!1);let i;return x(async()=>{try{a.value=!0,e.value=await N(s),document.title="Profile: "+e.value.name,i=B(e.value.description)}catch(r){console.log(r)}finally{a.value=!1}}),(r,K)=>(o(),g(m(C),{show:a.value},{default:j(()=>[e.value?(o(),c("div",G,[n("div",I,[n("div",O,[u(F,{class:"mb-3",data:e.value},null,8,["data"])]),m(i)?(o(),c("div",T,[n("p",{innerHTML:m(i)},null,8,J)])):d("",!0)])])):d("",!0)]),_:1},8,["show"]))}};export{Y as default};
