import{o as J,bg as Te,U as Q,w as Ee,x as _e,d as Fe,c as De,e as ue,aE as ee,a6 as Be,b9 as Me,ba as ze,bb as He,n as Y,bh as me,Z as $e,bi as je,bj as Ge,bk as We,bl as Ue,h as D,$ as qe,g as Z,C as he,k as z,l as $,y as Ve,A as Ze,b as Xe,u as Je,p as we,s as U,t as Qe,f as re,B as xe}from"./app.js";import{g as Ye,j as en,w as ce,D as nn,m as on,r as q,d as j,h as v,i as V,H as Se,E as tn,f as A,p as X,F as rn,y as H}from"./app-vue-BkvlpQbN.js";function ve(e,n){let{target:o}=e;for(;o;){if(o.dataset&&o.dataset[n]!==void 0)return!0;o=o.parentElement}return!1}function dn(e={},n){const o=Ye({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:t,keyup:r}=e,i=l=>{switch(l.key){case"Control":o.ctrl=!0;break;case"Meta":o.command=!0,o.win=!0;break;case"Shift":o.shift=!0;break;case"Tab":o.tab=!0;break}t!==void 0&&Object.keys(t).forEach(s=>{if(s!==l.key)return;const c=t[s];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:w=!1}=c;f&&l.stopPropagation(),w&&l.preventDefault(),c.handler(l)}})},d=l=>{switch(l.key){case"Control":o.ctrl=!1;break;case"Meta":o.command=!1,o.win=!1;break;case"Shift":o.shift=!1;break;case"Tab":o.tab=!1;break}r!==void 0&&Object.keys(r).forEach(s=>{if(s!==l.key)return;const c=r[s];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:w=!1}=c;f&&l.stopPropagation(),w&&l.preventDefault(),c.handler(l)}})},a=()=>{(n===void 0||n.value)&&(J("keydown",document,i),J("keyup",document,d)),n!==void 0&&ce(n,l=>{l?(J("keydown",document,i),J("keyup",document,d)):(Q("keydown",document,i),Q("keyup",document,d))})};return Te()?(nn(a),on(()=>{(n===void 0||n.value)&&(Q("keydown",document,i),Q("keyup",document,d))})):a(),en(o)}function ln(e,n,o){const t=q(e.value);let r=null;return ce(e,i=>{r!==null&&window.clearTimeout(r),i===!0?o&&!o.value?t.value=!0:r=window.setTimeout(()=>{t.value=!0},n):t.value=!1}),t}function an(e){return n=>{n?e.value=n.$el:e.value=null}}const sn=j({name:"ChevronRight",render(){return v("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}});function ye(e){return Array.isArray(e)?e:[e]}const ae={STOP:"STOP"};function ke(e,n){const o=n(e);e.children!==void 0&&o!==ae.STOP&&e.children.forEach(t=>ke(t,n))}function un(e,n={}){const{preserveGroup:o=!1}=n,t=[],r=o?d=>{d.isLeaf||(t.push(d.key),i(d.children))}:d=>{d.isLeaf||(d.isGroup||t.push(d.key),i(d.children))};function i(d){d.forEach(r)}return i(e),t}function cn(e,n){const{isLeaf:o}=e;return o!==void 0?o:!n(e)}function fn(e){return e.children}function pn(e){return e.key}function hn(){return!1}function vn(e,n){const{isLeaf:o}=e;return!(o===!1&&!Array.isArray(n(e)))}function yn(e){return e.disabled===!0}function gn(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function ie(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function de(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function bn(e,n){const o=new Set(e);return n.forEach(t=>{o.has(t)||o.add(t)}),Array.from(o)}function mn(e,n){const o=new Set(e);return n.forEach(t=>{o.has(t)&&o.delete(t)}),Array.from(o)}function wn(e){return e?.type==="group"}function Vn(e){const n=new Map;return e.forEach((o,t)=>{n.set(o.key,t)}),o=>{var t;return(t=n.get(o))!==null&&t!==void 0?t:null}}class xn extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function Sn(e,n,o,t){return ne(n.concat(e),o,t,!1)}function kn(e,n){const o=new Set;return e.forEach(t=>{const r=n.treeNodeMap.get(t);if(r!==void 0){let i=r.parent;for(;i!==null&&!(i.disabled||o.has(i.key));)o.add(i.key),i=i.parent}}),o}function Cn(e,n,o,t){const r=ne(n,o,t,!1),i=ne(e,o,t,!0),d=kn(e,o),a=[];return r.forEach(l=>{(i.has(l)||d.has(l))&&a.push(l)}),a.forEach(l=>r.delete(l)),r}function le(e,n){const{checkedKeys:o,keysToCheck:t,keysToUncheck:r,indeterminateKeys:i,cascade:d,leafOnly:a,checkStrategy:l,allowNotLoaded:s}=e;if(!d)return t!==void 0?{checkedKeys:bn(o,t),indeterminateKeys:Array.from(i)}:r!==void 0?{checkedKeys:mn(o,r),indeterminateKeys:Array.from(i)}:{checkedKeys:Array.from(o),indeterminateKeys:Array.from(i)};const{levelTreeNodeMap:c}=n;let f;r!==void 0?f=Cn(r,o,n,s):t!==void 0?f=Sn(t,o,n,s):f=ne(o,n,s,!1);const w=l==="parent",I=l==="child"||a,m=f,O=new Set,N=Math.max.apply(null,Array.from(c.keys()));for(let K=N;K>=0;K-=1){const B=K===0,_=c.get(K);for(const u of _){if(u.isLeaf)continue;const{key:p,shallowLoaded:P}=u;if(I&&P&&u.children.forEach(x=>{!x.disabled&&!x.isLeaf&&x.shallowLoaded&&m.has(x.key)&&m.delete(x.key)}),u.disabled||!P)continue;let T=!0,L=!1,R=!0;for(const x of u.children){const F=x.key;if(!x.disabled){if(R&&(R=!1),m.has(F))L=!0;else if(O.has(F)){L=!0,T=!1;break}else if(T=!1,L)break}}T&&!R?(w&&u.children.forEach(x=>{!x.disabled&&m.has(x.key)&&m.delete(x.key)}),m.add(p)):L&&O.add(p),B&&I&&m.has(p)&&m.delete(p)}}return{checkedKeys:Array.from(m),indeterminateKeys:Array.from(O)}}function ne(e,n,o,t){const{treeNodeMap:r,getChildren:i}=n,d=new Set,a=new Set(e);return e.forEach(l=>{const s=r.get(l);s!==void 0&&ke(s,c=>{if(c.disabled)return ae.STOP;const{key:f}=c;if(!d.has(f)&&(d.add(f),a.add(f),gn(c.rawNode,i))){if(t)return ae.STOP;if(!o)throw new xn}})}),a}function Nn(e,{includeGroup:n=!1,includeSelf:o=!0},t){var r;const i=t.treeNodeMap;let d=e==null?null:(r=i.get(e))!==null&&r!==void 0?r:null;const a={keyPath:[],treeNodePath:[],treeNode:d};if(d?.ignored)return a.treeNode=null,a;for(;d;)!d.ignored&&(n||!d.isGroup)&&a.treeNodePath.push(d),d=d.parent;return a.treeNodePath.reverse(),o||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function Pn(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function Kn(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r+1)%t]:r===o.length-1?null:o[r+1]}function ge(e,n,{loop:o=!1,includeDisabled:t=!1}={}){const r=n==="prev"?In:Kn,i={reverse:n==="prev"};let d=!1,a=null;function l(s){if(s!==null){if(s===e){if(!d)d=!0;else if(!e.disabled&&!e.isGroup){a=e;return}}else if((!s.disabled||t)&&!s.ignored&&!s.isGroup){a=s;return}if(s.isGroup){const c=fe(s,i);c!==null?a=c:l(r(s,o))}else{const c=r(s,!1);if(c!==null)l(c);else{const f=Rn(s);f?.isGroup?l(r(f,o)):o&&l(r(s,!0))}}}}return l(e),a}function In(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r-1+t)%t]:r===0?null:o[r-1]}function Rn(e){return e.parent}function fe(e,n={}){const{reverse:o=!1}=n,{children:t}=e;if(t){const{length:r}=t,i=o?r-1:0,d=o?-1:r,a=o?-1:1;for(let l=i;l!==d;l+=a){const s=t[l];if(!s.disabled&&!s.ignored)if(s.isGroup){const c=fe(s,n);if(c!==null)return c}else return s}}return null}const An={getChild(){return this.ignored?null:fe(this)},getParent(){const{parent:e}=this;return e?.isGroup?e.getParent():e},getNext(e={}){return ge(this,"next",e)},getPrev(e={}){return ge(this,"prev",e)}};function Ln(e,n){const o=n?new Set(n):void 0,t=[];function r(i){i.forEach(d=>{t.push(d),!(d.isLeaf||!d.children||d.ignored)&&(d.isGroup||o===void 0||o.has(d.key))&&r(d.children)})}return r(e),t}function On(e,n){const o=e.key;for(;n;){if(n.key===o)return!0;n=n.parent}return!1}function Ce(e,n,o,t,r,i=null,d=0){const a=[];return e.forEach((l,s)=>{var c;const f=Object.create(t);if(f.rawNode=l,f.siblings=a,f.level=d,f.index=s,f.isFirstChild=s===0,f.isLastChild=s+1===e.length,f.parent=i,!f.ignored){const w=r(l);Array.isArray(w)&&(f.children=Ce(w,n,o,t,r,f,d+1))}a.push(f),n.set(f.key,f),o.has(d)||o.set(d,[]),(c=o.get(d))===null||c===void 0||c.push(f)}),a}function Tn(e,n={}){var o;const t=new Map,r=new Map,{getDisabled:i=yn,getIgnored:d=hn,getIsGroup:a=wn,getKey:l=pn}=n,s=(o=n.getChildren)!==null&&o!==void 0?o:fn,c=n.ignoreEmptyChildren?u=>{const p=s(u);return Array.isArray(p)?p.length?p:null:p}:s,f=Object.assign({get key(){return l(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return cn(this.rawNode,c)},get shallowLoaded(){return vn(this.rawNode,c)},get ignored(){return d(this.rawNode)},contains(u){return On(this,u)}},An),w=Ce(e,t,r,f,c);function I(u){if(u==null)return null;const p=t.get(u);return p&&!p.isGroup&&!p.ignored?p:null}function m(u){if(u==null)return null;const p=t.get(u);return p&&!p.ignored?p:null}function O(u,p){const P=m(u);return P?P.getPrev(p):null}function N(u,p){const P=m(u);return P?P.getNext(p):null}function K(u){const p=m(u);return p?p.getParent():null}function B(u){const p=m(u);return p?p.getChild():null}const _={treeNodes:w,treeNodeMap:t,levelTreeNodeMap:r,maxLevel:Math.max(...r.keys()),getChildren:c,getFlattenedNodes(u){return Ln(w,u)},getNode:I,getPrev:O,getNext:N,getParent:K,getChild:B,getFirstAvailableNode(){return Pn(w)},getPath(u,p={}){return Nn(u,p,_)},getCheckedKeys(u,p={}){const{cascade:P=!0,leafOnly:T=!1,checkStrategy:L="all",allowNotLoaded:R=!1}=p;return le({checkedKeys:ie(u),indeterminateKeys:de(u),cascade:P,leafOnly:T,checkStrategy:L,allowNotLoaded:R},_)},check(u,p,P={}){const{cascade:T=!0,leafOnly:L=!1,checkStrategy:R="all",allowNotLoaded:x=!1}=P;return le({checkedKeys:ie(p),indeterminateKeys:de(p),keysToCheck:u==null?[]:ye(u),cascade:T,leafOnly:L,checkStrategy:R,allowNotLoaded:x},_)},uncheck(u,p,P={}){const{cascade:T=!0,leafOnly:L=!1,checkStrategy:R="all",allowNotLoaded:x=!1}=P;return le({checkedKeys:ie(p),indeterminateKeys:de(p),keysToUncheck:u==null?[]:ye(u),cascade:T,leafOnly:L,checkStrategy:R,allowNotLoaded:x},_)},getNonLeafKeys(u={}){return un(w,u)}};return _}const En={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};function _n(e){const{primaryColor:n,textColor2:o,dividerColor:t,hoverColor:r,popoverColor:i,invertedColor:d,borderRadius:a,fontSizeSmall:l,fontSizeMedium:s,fontSizeLarge:c,fontSizeHuge:f,heightSmall:w,heightMedium:I,heightLarge:m,heightHuge:O,textColor3:N,opacityDisabled:K}=e;return Object.assign(Object.assign({},En),{optionHeightSmall:w,optionHeightMedium:I,optionHeightLarge:m,optionHeightHuge:O,borderRadius:a,fontSizeSmall:l,fontSizeMedium:s,fontSizeLarge:c,fontSizeHuge:f,optionTextColor:o,optionTextColorHover:o,optionTextColorActive:n,optionTextColorChildActive:n,color:i,dividerColor:t,suffixColor:o,prefixColor:o,optionColorHover:r,optionColorActive:De(n,{alpha:.1}),groupHeaderTextColor:N,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:d,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:n,optionColorActiveInverted:n,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:K})}const Fn=Ee({name:"Dropdown",common:Fe,peers:{Popover:_e},self:_n}),pe=ue("n-dropdown-menu"),oe=ue("n-dropdown"),be=ue("n-dropdown-option"),Ne=j({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return v("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),Dn=j({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:n}=V(pe),{renderLabelRef:o,labelFieldRef:t,nodePropsRef:r,renderOptionRef:i}=V(oe);return{labelField:t,showIcon:e,hasSubmenu:n,renderLabel:o,nodeProps:r,renderOption:i}},render(){var e;const{clsPrefix:n,hasSubmenu:o,showIcon:t,nodeProps:r,renderLabel:i,renderOption:d}=this,{rawNode:a}=this.tmNode,l=v("div",Object.assign({class:`${n}-dropdown-option`},r?.(a)),v("div",{class:`${n}-dropdown-option-body ${n}-dropdown-option-body--group`},v("div",{"data-dropdown-option":!0,class:[`${n}-dropdown-option-body__prefix`,t&&`${n}-dropdown-option-body__prefix--show-icon`]},ee(a.icon)),v("div",{class:`${n}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(a):ee((e=a.title)!==null&&e!==void 0?e:a[this.labelField])),v("div",{class:[`${n}-dropdown-option-body__suffix`,o&&`${n}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return d?d({node:l,option:a}):l}});function se(e,n){return e.type==="submenu"||e.type===void 0&&e[n]!==void 0}function Bn(e){return e.type==="group"}function Pe(e){return e.type==="divider"}function Mn(e){return e.type==="render"}const Ke=j({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const n=V(oe),{hoverKeyRef:o,keyboardKeyRef:t,lastToggledSubmenuKeyRef:r,pendingKeyPathRef:i,activeKeyPathRef:d,animatedRef:a,mergedShowRef:l,renderLabelRef:s,renderIconRef:c,labelFieldRef:f,childrenFieldRef:w,renderOptionRef:I,nodePropsRef:m,menuPropsRef:O}=n,N=V(be,null),K=V(pe),B=V(me),_=A(()=>e.tmNode.rawNode),u=A(()=>{const{value:y}=w;return se(e.tmNode.rawNode,y)}),p=A(()=>{const{disabled:y}=e.tmNode;return y}),P=A(()=>{if(!u.value)return!1;const{key:y,disabled:C}=e.tmNode;if(C)return!1;const{value:M}=o,{value:G}=t,{value:te}=r,{value:W}=i;return M!==null?W.includes(y):G!==null?W.includes(y)&&W[W.length-1]!==y:te!==null?W.includes(y):!1}),T=A(()=>t.value===null&&!a.value),L=ln(P,300,T),R=A(()=>!!N?.enteringSubmenuRef.value),x=q(!1);X(be,{enteringSubmenuRef:x});function F(){x.value=!0}function h(){x.value=!1}function k(){const{parentKey:y,tmNode:C}=e;C.disabled||l.value&&(r.value=y,t.value=null,o.value=C.key)}function b(){const{tmNode:y}=e;y.disabled||l.value&&o.value!==y.key&&k()}function g(y){if(e.tmNode.disabled||!l.value)return;const{relatedTarget:C}=y;C&&!ve({target:C},"dropdownOption")&&!ve({target:C},"scrollbarRail")&&(o.value=null)}function E(){const{value:y}=u,{tmNode:C}=e;l.value&&!y&&!C.disabled&&(n.doSelect(C.key,C.rawNode),n.doUpdateShow(!1))}return{labelField:f,renderLabel:s,renderIcon:c,siblingHasIcon:K.showIconRef,siblingHasSubmenu:K.hasSubmenuRef,menuProps:O,popoverBody:B,animated:a,mergedShowSubmenu:A(()=>L.value&&!R.value),rawNode:_,hasSubmenu:u,pending:Y(()=>{const{value:y}=i,{key:C}=e.tmNode;return y.includes(C)}),childActive:Y(()=>{const{value:y}=d,{key:C}=e.tmNode,M=y.findIndex(G=>C===G);return M===-1?!1:M<y.length-1}),active:Y(()=>{const{value:y}=d,{key:C}=e.tmNode,M=y.findIndex(G=>C===G);return M===-1?!1:M===y.length-1}),mergedDisabled:p,renderOption:I,nodeProps:m,handleClick:E,handleMouseMove:b,handleMouseEnter:k,handleMouseLeave:g,handleSubmenuBeforeEnter:F,handleSubmenuAfterEnter:h}},render(){var e,n;const{animated:o,rawNode:t,mergedShowSubmenu:r,clsPrefix:i,siblingHasIcon:d,siblingHasSubmenu:a,renderLabel:l,renderIcon:s,renderOption:c,nodeProps:f,props:w,scrollable:I}=this;let m=null;if(r){const B=(e=this.menuProps)===null||e===void 0?void 0:e.call(this,t,t.children);m=v(Ie,Object.assign({},B,{clsPrefix:i,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const O={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},N=f?.(t),K=v("div",Object.assign({class:[`${i}-dropdown-option`,N?.class],"data-dropdown-option":!0},N),v("div",Se(O,w),[v("div",{class:[`${i}-dropdown-option-body__prefix`,d&&`${i}-dropdown-option-body__prefix--show-icon`]},[s?s(t):ee(t.icon)]),v("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},l?l(t):ee((n=t[this.labelField])!==null&&n!==void 0?n:t.title)),v("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,a&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?v(Be,null,{default:()=>v(sn,null)}):null)]),this.hasSubmenu?v(Me,null,{default:()=>[v(ze,null,{default:()=>v("div",{class:`${i}-dropdown-offset-container`},v(He,{show:this.mergedShowSubmenu,placement:this.placement,to:I&&this.popoverBody||void 0,teleportDisabled:!I},{default:()=>v("div",{class:`${i}-dropdown-menu-wrapper`},o?v(tn,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>m}):m)}))})]}):null);return c?c({node:K,option:t}):K}}),zn=j({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:n,clsPrefix:o}=this,{children:t}=e;return v(rn,null,v(Dn,{clsPrefix:o,tmNode:e,key:e.key}),t?.map(r=>{const{rawNode:i}=r;return i.show===!1?null:Pe(i)?v(Ne,{clsPrefix:o,key:r.key}):r.isGroup?($e("dropdown","`group` node is not allowed to be put in `group` node."),null):v(Ke,{clsPrefix:o,tmNode:r,parentKey:n,key:r.key})}))}}),Hn=j({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:n}}=this.tmNode;return v("div",n,[e?.()])}}),Ie=j({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:n,childrenFieldRef:o}=V(oe);X(pe,{showIconRef:A(()=>{const r=n.value;return e.tmNodes.some(i=>{var d;if(i.isGroup)return(d=i.children)===null||d===void 0?void 0:d.some(({rawNode:l})=>r?r(l):l.icon);const{rawNode:a}=i;return r?r(a):a.icon})}),hasSubmenuRef:A(()=>{const{value:r}=o;return e.tmNodes.some(i=>{var d;if(i.isGroup)return(d=i.children)===null||d===void 0?void 0:d.some(({rawNode:l})=>se(l,r));const{rawNode:a}=i;return se(a,r)})})});const t=q(null);return X(We,null),X(Ue,null),X(me,t),{bodyRef:t}},render(){const{parentKey:e,clsPrefix:n,scrollable:o}=this,t=this.tmNodes.map(r=>{const{rawNode:i}=r;return i.show===!1?null:Mn(i)?v(Hn,{tmNode:r,key:r.key}):Pe(i)?v(Ne,{clsPrefix:n,key:r.key}):Bn(i)?v(zn,{clsPrefix:n,tmNode:r,parentKey:e,key:r.key}):v(Ke,{clsPrefix:n,tmNode:r,parentKey:e,key:r.key,props:i.props,scrollable:o})});return v("div",{class:[`${n}-dropdown-menu`,o&&`${n}-dropdown-menu--scrollable`],ref:"bodyRef"},o?v(je,{contentClass:`${n}-dropdown-menu__content`},{default:()=>t}):t,this.showArrow?Ge({clsPrefix:n,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),$n=D("dropdown-menu",`
 transform-origin: var(--v-transform-origin);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[qe(),D("dropdown-option",`
 position: relative;
 `,[Z("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[Z("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),D("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[Z("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),he("disabled",[z("pending",`
 color: var(--n-option-text-color-hover);
 `,[$("prefix, suffix",`
 color: var(--n-option-text-color-hover);
 `),Z("&::before","background-color: var(--n-option-color-hover);")]),z("active",`
 color: var(--n-option-text-color-active);
 `,[$("prefix, suffix",`
 color: var(--n-option-text-color-active);
 `),Z("&::before","background-color: var(--n-option-color-active);")]),z("child-active",`
 color: var(--n-option-text-color-child-active);
 `,[$("prefix, suffix",`
 color: var(--n-option-text-color-child-active);
 `)])]),z("disabled",`
 cursor: not-allowed;
 opacity: var(--n-option-opacity-disabled);
 `),z("group",`
 font-size: calc(var(--n-font-size) - 1px);
 color: var(--n-group-header-text-color);
 `,[$("prefix",`
 width: calc(var(--n-option-prefix-width) / 2);
 `,[z("show-icon",`
 width: calc(var(--n-option-icon-prefix-width) / 2);
 `)])]),$("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 z-index: 1;
 `,[z("show-icon",`
 width: var(--n-option-icon-prefix-width);
 `),D("icon",`
 font-size: var(--n-option-icon-size);
 `)]),$("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),$("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 z-index: 1;
 `,[z("has-submenu",`
 width: var(--n-option-icon-suffix-width);
 `),D("icon",`
 font-size: var(--n-option-icon-size);
 `)]),D("dropdown-menu","pointer-events: all;")]),D("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),D("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),D("dropdown-menu-wrapper",`
 transform-origin: var(--v-transform-origin);
 width: fit-content;
 `),Z(">",[D("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),he("scrollable",`
 padding: var(--n-padding);
 `),z("scrollable",[$("content",`
 padding: var(--n-padding);
 `)])]),jn={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Gn=Object.keys(xe),Wn=Object.assign(Object.assign(Object.assign({},xe),jn),we.props),Zn=j({name:"Dropdown",inheritAttrs:!1,props:Wn,setup(e){const n=q(!1),o=Xe(H(e,"show"),n),t=A(()=>{const{keyField:h,childrenField:k}=e;return Tn(e.options,{getKey(b){return b[h]},getDisabled(b){return b.disabled===!0},getIgnored(b){return b.type==="divider"||b.type==="render"},getChildren(b){return b[k]}})}),r=A(()=>t.value.treeNodes),i=q(null),d=q(null),a=q(null),l=A(()=>{var h,k,b;return(b=(k=(h=i.value)!==null&&h!==void 0?h:d.value)!==null&&k!==void 0?k:a.value)!==null&&b!==void 0?b:null}),s=A(()=>t.value.getPath(l.value).keyPath),c=A(()=>t.value.getPath(e.value).keyPath),f=Y(()=>e.keyboard&&o.value);dn({keydown:{ArrowUp:{prevent:!0,handler:p},ArrowRight:{prevent:!0,handler:u},ArrowDown:{prevent:!0,handler:P},ArrowLeft:{prevent:!0,handler:_},Enter:{prevent:!0,handler:T},Escape:B}},f);const{mergedClsPrefixRef:w,inlineThemeDisabled:I}=Je(e),m=we("Dropdown","-dropdown",$n,Fn,e,w);X(oe,{labelFieldRef:H(e,"labelField"),childrenFieldRef:H(e,"childrenField"),renderLabelRef:H(e,"renderLabel"),renderIconRef:H(e,"renderIcon"),hoverKeyRef:i,keyboardKeyRef:d,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:s,activeKeyPathRef:c,animatedRef:H(e,"animated"),mergedShowRef:o,nodePropsRef:H(e,"nodeProps"),renderOptionRef:H(e,"renderOption"),menuPropsRef:H(e,"menuProps"),doSelect:O,doUpdateShow:N}),ce(o,h=>{!e.animated&&!h&&K()});function O(h,k){const{onSelect:b}=e;b&&re(b,h,k)}function N(h){const{"onUpdate:show":k,onUpdateShow:b}=e;k&&re(k,h),b&&re(b,h),n.value=h}function K(){i.value=null,d.value=null,a.value=null}function B(){N(!1)}function _(){R("left")}function u(){R("right")}function p(){R("up")}function P(){R("down")}function T(){const h=L();h?.isLeaf&&o.value&&(O(h.key,h.rawNode),N(!1))}function L(){var h;const{value:k}=t,{value:b}=l;return!k||b===null?null:(h=k.getNode(b))!==null&&h!==void 0?h:null}function R(h){const{value:k}=l,{value:{getFirstAvailableNode:b}}=t;let g=null;if(k===null){const E=b();E!==null&&(g=E.key)}else{const E=L();if(E){let y;switch(h){case"down":y=E.getNext();break;case"up":y=E.getPrev();break;case"right":y=E.getChild();break;case"left":y=E.getParent();break}y&&(g=y.key)}}g!==null&&(i.value=null,d.value=g)}const x=A(()=>{const{size:h,inverted:k}=e,{common:{cubicBezierEaseInOut:b},self:g}=m.value,{padding:E,dividerColor:y,borderRadius:C,optionOpacityDisabled:M,[U("optionIconSuffixWidth",h)]:G,[U("optionSuffixWidth",h)]:te,[U("optionIconPrefixWidth",h)]:W,[U("optionPrefixWidth",h)]:Re,[U("fontSize",h)]:Ae,[U("optionHeight",h)]:Le,[U("optionIconSize",h)]:Oe}=g,S={"--n-bezier":b,"--n-font-size":Ae,"--n-padding":E,"--n-border-radius":C,"--n-option-height":Le,"--n-option-prefix-width":Re,"--n-option-icon-prefix-width":W,"--n-option-suffix-width":te,"--n-option-icon-suffix-width":G,"--n-option-icon-size":Oe,"--n-divider-color":y,"--n-option-opacity-disabled":M};return k?(S["--n-color"]=g.colorInverted,S["--n-option-color-hover"]=g.optionColorHoverInverted,S["--n-option-color-active"]=g.optionColorActiveInverted,S["--n-option-text-color"]=g.optionTextColorInverted,S["--n-option-text-color-hover"]=g.optionTextColorHoverInverted,S["--n-option-text-color-active"]=g.optionTextColorActiveInverted,S["--n-option-text-color-child-active"]=g.optionTextColorChildActiveInverted,S["--n-prefix-color"]=g.prefixColorInverted,S["--n-suffix-color"]=g.suffixColorInverted,S["--n-group-header-text-color"]=g.groupHeaderTextColorInverted):(S["--n-color"]=g.color,S["--n-option-color-hover"]=g.optionColorHover,S["--n-option-color-active"]=g.optionColorActive,S["--n-option-text-color"]=g.optionTextColor,S["--n-option-text-color-hover"]=g.optionTextColorHover,S["--n-option-text-color-active"]=g.optionTextColorActive,S["--n-option-text-color-child-active"]=g.optionTextColorChildActive,S["--n-prefix-color"]=g.prefixColor,S["--n-suffix-color"]=g.suffixColor,S["--n-group-header-text-color"]=g.groupHeaderTextColor),S}),F=I?Qe("dropdown",A(()=>`${e.size[0]}${e.inverted?"i":""}`),x,e):void 0;return{mergedClsPrefix:w,mergedTheme:m,tmNodes:r,mergedShow:o,handleAfterLeave:()=>{e.animated&&K()},doUpdateShow:N,cssVars:I?void 0:x,themeClass:F?.themeClass,onRender:F?.onRender}},render(){const e=(t,r,i,d,a)=>{var l;const{mergedClsPrefix:s,menuProps:c}=this;(l=this.onRender)===null||l===void 0||l.call(this);const f=c?.(void 0,this.tmNodes.map(I=>I.rawNode))||{},w={ref:an(r),class:[t,`${s}-dropdown`,this.themeClass],clsPrefix:s,tmNodes:this.tmNodes,style:[...i,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:d,onMouseleave:a};return v(Ie,Se(this.$attrs,w,f))},{mergedTheme:n}=this,o={show:this.mergedShow,theme:n.peers.Popover,themeOverrides:n.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:e,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return v(Ve,Object.assign({},Ze(this.$props,Gn),o),{trigger:()=>{var t,r;return(r=(t=this.$slots).default)===null||r===void 0?void 0:r.call(t)}})}});export{sn as C,Zn as N,an as a,Vn as b,Tn as c,Fn as d,ve as h};
