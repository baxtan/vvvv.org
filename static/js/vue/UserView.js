import{d as I,ab as n,ac as l,av as K,r as d,aw as A,ah as _,ad as t,ai as p,ak as c,an as r,ax as J,ay as g,M as w,b as y,az as T,af as N,aj as m,aA as Q,aB as W,au as $,aC as X,aD as Y,aq as Z,ag as x,aE as ee,aF as te,aG as ae,ar as le,al as se,aH as ne,am as E,aI as oe}from"./app.js";import{N as re}from"./Space.js";import{_ as ie}from"./SocialView.js";import{_ as ce}from"./Location.js";import{N as ue}from"./PerformantEllipsis.js";import"./LocationOutline.js";const de={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ve=I({name:"CalendarOutline",render:function(o,s){return l(),n("svg",de,s[0]||(s[0]=[K('<rect fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" x="48" y="80" width="416" height="384" rx="48"></rect><circle cx="296" cy="232" r="24" fill="currentColor"></circle><circle cx="376" cy="232" r="24" fill="currentColor"></circle><circle cx="296" cy="312" r="24" fill="currentColor"></circle><circle cx="376" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="312" r="24" fill="currentColor"></circle><circle cx="216" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="392" r="24" fill="currentColor"></circle><circle cx="216" cy="392" r="24" fill="currentColor"></circle><circle cx="296" cy="392" r="24" fill="currentColor"></circle><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" stroke-linecap="round" d="M128 48v32"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" stroke-linecap="round" d="M384 48v32"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" d="M464 160H48"></path>',13)]))}}),me=["innerHTML"],fe=["innerHTML"],he={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(a){const o=["Show More","Show Less"],s=d(0),e=d(!1),f=d(a.text);A(()=>{a.text.length>a.maxLength&&(e.value=!0),f.value=a.text.trim()});function v(){s.value?s.value=0:s.value=1}return(C,k)=>(l(),n(w,null,[e.value&&s.value==0?(l(),_(c(ue),{key:0,"line-clamp":"3",tooltip:"false"},{default:p(()=>[t("span",{innerHTML:a.text},null,8,me)]),_:1})):(l(),n("span",{key:1,innerHTML:a.text},null,8,fe)),t("div",null,[e.value?(l(),n("a",{key:0,href:"#",onClick:J(v,["prevent"])},g(o[s.value]),1)):r("",!0)])],64))}},pe={class:"card-body"},ge=["src"],ye=["innerHTML"],_e={class:"row"},ke={key:0,class:"col-12 col-lg-6"},be={class:"pr-lg-2"},xe=["innerHTML"],we={key:1,class:"col-12 col-lg-6"},$e={class:"pl-lg-2"},Ce=["innerHTML"],Le={class:"card-text"},Me="",Te={__name:"HireView",props:{data:Object,contact:String},setup(a){const o=y(()=>a.data?{description:T(a.data.description),contact:a.data.contact,skills_vvvv:T(a.data.skills_vvvv),skills_other:T(a.data.skills_other),image:a.data.image?N(a.data.image)+Me:null,availableFor:a.data.availableFor?a.data.availableFor.map(s=>s.AvailableFor_Options_id?s.AvailableFor_Options_id.value:""):[]}:{});return(s,e)=>(l(),n("div",pe,[o.value.image?(l(),n("img",{key:0,src:o.value.image,class:"img-fluid pt-2 mb-4"},null,8,ge)):r("",!0),o.value.description?(l(),n("p",{key:1,class:"card-text",innerHTML:o.value.description},null,8,ye)):r("",!0),e[4]||(e[4]=t("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),t("div",_e,[o.value.skills_vvvv?(l(),n("div",ke,[t("div",be,[e[0]||(e[0]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"vvvv skills")],-1)),t("p",{class:"card-text",innerHTML:o.value.skills_vvvv},null,8,xe)])])):r("",!0),o.value.skills_vvvv?(l(),n("div",we,[t("div",$e,[e[1]||(e[1]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"other skills")],-1)),t("p",{class:"card-text",innerHTML:o.value.skills_other},null,8,Ce)])])):r("",!0)]),o.value.contact?(l(),n(w,{key:2},[e[2]||(e[2]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"contact")],-1)),t("p",Le,g(o.value.contact),1)],64)):r("",!0),o.value.availableFor.length>0?(l(),n(w,{key:3},[e[3]||(e[3]=t("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"Available for")],-1)),m(c(re),null,{default:p(()=>[(l(!0),n(w,null,Q(o.value.availableFor,f=>(l(),_(c(W),{class:"mr-2",bordered:!1},{default:p(()=>[$(g(f),1)]),_:2},1024))),256))]),_:1})],64)):r("",!0)]))}},He=["href"],Ne={class:"mb-1 d-flex text-align-center"},Se=["href"],je={class:"mb-1"},Fe={__name:"PartOf",props:["data"],setup(a){return(o,s)=>(l(),n("div",null,[s[2]||(s[2]=t("div",{class:"mb-2"},"Part of",-1)),a.data.company?(l(),n("a",{key:0,href:"/business/"+a.data.company.name,onClick:s[0]||(s[0]=e=>c(X)(a.data.company.name,e))},[t("div",Ne,g(a.data.company.name),1)],8,He)):r("",!0),a.data.edu?(l(),n("a",{key:1,href:"/edu/"+a.data.edu.name,onClick:s[1]||(s[1]=e=>c(Y)(a.data.edu.name,e))},[t("p",je,g(a.data.edu.name),1)],8,Se)):r("",!0)]))}},Oe={key:0,class:"userView"},Pe={class:"row"},Ee={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},Ae={class:"my-3"},Re=["href"],Be={key:0,class:"text-muted mb-1"},Ue={class:"joined mb-2"},Ve={class:"col-12 col-md-6 col-lg-8"},qe={key:0,class:"mb-4 statement"},De={key:1},ze={class:"card"},H=120,Xe={__name:"UserView",setup(a){const o=Z();le();const s=o.params.username,e=d(null),f=d(null),v=d(null),C=d(null),k=d(!1),S=d(null),b=d({}),R=["contact","website","github","nuget","mastodon","pixelfed"],j=`?withoutEnlargement=true&quality=90&fit=cover&width=${H}&height=${H}`,B=`${x.GET_USERS}?filter[username][_eq]=${s}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,U=`${x.GET_COMPANIES}?filter[owner][username][_eq]=${s}&fields=name,logo`,V=`${x.GET_EDUS}?filter[owner][username][_eq]=${s}&fields=name,logo`;A(async()=>{k.value=!0;try{let i=await fetch(B),u=await i.json();if(!i.ok||u.data?.length==0)throw"Can't find a profile for this user";const h=u.data[0];e.value=h,C.value=e.value.userpic?`${N(e.value.userpic)}${j}`:null,f.value=h.related[0]?.hire,v.value=h.related[0]?.social,S.value=e.value.statement;const G=[F(U),F(V)],[L,M]=await Promise.allSettled(G);L.status==="fulfilled"&&L.value&&(b.value.company=L.value),M.status==="fulfilled"&&M.value&&(b.value.edu=M.value)}catch(i){console.error(i)}finally{k.value=!1}});async function F(i){const u=await fetch(i),h=await u.json();return u.ok&&h.data?.length>0?{name:h.data[0].name,logo:h.data[0].logo?`${N(h.data[0].logo)}${j}`:null}:null}const q={year:"numeric",month:"short",day:"numeric"},D=y(()=>new Date(e.value.date_created).toLocaleString("en-US",q)),O=y(()=>({city:e.value.location_city,country:e.value.location_country})),P=y(()=>{const i=[e.value.name,e.value.surname].filter(Boolean).join(" ");return i||null}),z=y(()=>`${x.FORUM}u/${e.value.username}/summary`);return y(()=>{let i=null;return v.value?.website&&v.value.website!==""&&(i={name:te(v.value.website),link:ee(v.value.website)}),i}),(i,u)=>(l(),_(c(ae),{show:k.value},{default:p(()=>[e.value?(l(),n("div",Oe,[t("div",Pe,[t("div",Ee,[m(c(se),{objectFit:"contain",round:"",size:H,src:C.value},null,8,["src"]),t("div",Ae,[t("h5",null,[$(g(e.value.username)+" ",1),t("a",{href:z.value,target:"_blank",class:"pl-2",alt:"Forum Profile"},[m(c(ne),{trigger:"hover"},{trigger:p(()=>[m(c(E),null,{default:p(()=>[m(c(oe))]),_:1})]),default:p(()=>[u[0]||(u[0]=$(" Open Forum Profile "))]),_:1})],8,Re)]),P.value?(l(),n("p",Be,g(P.value),1)):r("",!0)]),t("div",Ue,[m(c(E),{size:"1.2rem",class:"mr-2"},{default:p(()=>[m(c(ve))]),_:1}),$(" "+g(D.value),1)]),O.value?(l(),_(ce,{key:0,location:O.value},null,8,["location"])):r("",!0),Object.keys(b.value)?(l(),_(Fe,{key:1,data:b.value,class:"border-top pt-2 mt-4"},null,8,["data"])):r("",!0),v.value?(l(),_(ie,{key:2,class:"mt-4 mb-4 pt-3 border-top",social:v.value,order:R},null,8,["social"])):r("",!0)]),t("div",Ve,[S.value?(l(),n("div",qe,[m(he,{text:e.value.statement,maxLength:255,clippedLength:100},null,8,["text"])])):r("",!0),f.value&&f.value.available?(l(),n("div",De,[u[1]||(u[1]=t("h4",{class:"h4"},"Available for hire",-1)),t("div",ze,[m(Te,{data:f.value},null,8,["data"])])])):r("",!0)])])])):r("",!0)]),_:1},8,["show"]))}};export{Xe as default};
