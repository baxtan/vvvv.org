import{r as c,ao as N,ab as n,ac as a,ap as x,ad as e,aj as k,ai as f,aq as r,ar as O,as as h,M as v,b as y,at as $,ae as S,ag as m,au as P,av as q,ak as R,aw as U,af as F,ax as z,ay as G,al as D,az as I}from"./app.js";import{N as K,a as J}from"./Space.js";import{_ as Q}from"./SocialView.js";import{_ as W}from"./Location.js";import"./LocationOutline.js";const X=["innerHTML"],Y=["innerHTML"],H={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(l){const s=["Show More","Show Less"],o=c(0),t=c(!1),d=c(l.text);N(()=>{l.text.length>l.maxLength&&(t.value=!0),d.value=l.text.trim()});function _(){o.value?o.value=0:o.value=1}return(w,b)=>(a(),n(v,null,[t.value&&o.value==0?(a(),x(f(K),{key:0,"line-clamp":"3",tooltip:"false"},{default:k(()=>[e("span",{innerHTML:l.text},null,8,X)]),_:1})):(a(),n("span",{key:1,innerHTML:l.text},null,8,Y)),e("div",null,[t.value?(a(),n("a",{key:0,href:"#",onClick:O(_,["prevent"])},h(s[o.value]),1)):r("",!0)])],64))}},Z={class:"card-body"},ee={class:"row"},te={key:0,class:"col-12 col-lg-6"},ae=["src"],le={class:"col-12 col-lg-6"},se=["innerHTML"],ne=["innerHTML"],oe={class:"card-text"},ie="",re={__name:"HireView",props:{data:Object,contact:String},setup(l){const s=y(()=>l.data?{description:$(l.data.description),contact:l.data.contact,skills_vvvv:$(l.data.skills_vvvv),skills_other:$(l.data.skills_other),image:l.data.image?S(l.data.image)+ie:null,availableFor:l.data.availableFor?l.data.availableFor.map(o=>o.AvailableFor_Options_id?o.AvailableFor_Options_id.value:""):[]}:{});return(o,t)=>(a(),n("div",Z,[e("div",ee,[s.value.image?(a(),n("div",te,[e("img",{src:s.value.image,class:"img-fluid pt-2 mb-4"},null,8,ae),m(H,{text:s.value.description,maxLength:255,clippedLength:100},null,8,["text"])])):r("",!0),t[4]||(t[4]=e("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),e("div",le,[s.value.skills_vvvv?(a(),n(v,{key:0},[t[0]||(t[0]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"vvvv skills")],-1)),e("p",{class:"card-text",innerHTML:s.value.skills_vvvv},null,8,se)],64)):r("",!0),s.value.skills_other?(a(),n(v,{key:1},[t[1]||(t[1]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"other skills")],-1)),e("p",{class:"card-text",innerHTML:s.value.skills_other},null,8,ne)],64)):r("",!0),s.value.contact?(a(),n(v,{key:2},[t[2]||(t[2]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"contact")],-1)),e("p",oe,h(s.value.contact),1)],64)):r("",!0),s.value.availableFor.length>0?(a(),n(v,{key:3},[t[3]||(t[3]=e("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"Available for")],-1)),m(f(J),null,{default:k(()=>[(a(!0),n(v,null,P(s.value.availableFor,d=>(a(),x(f(q),{class:"mr-2",bordered:!1},{default:k(()=>[R(h(d),1)]),_:2},1024))),256))]),_:1})],64)):r("",!0)])])]))}},ue={key:0,class:"userView"},ce={class:"row"},de={class:"col-12 col-md-6 col-lg-4 text-center mb-sm-4"},ve={class:"my-3"},me={key:0,class:"text-muted mb-1"},fe={class:"mb-1"},he=["href"],_e={key:0,class:"border-top pt-2 mt-4"},pe=["href"],ge={class:"col-12 col-md-6 col-lg-8"},be={key:0,class:"mb-4 statement"},ye={key:1},xe={class:"card"},L=120,Me={__name:"UserView",setup(l){const s=U();G();const o=s.params.username,t=c(null),d=c(null),_=c(null),w=c(null),b=c(!1),p=c(null),T=c(null),A=["contact","website","github","nuget","mastodon","pixelfed"],C=`?withoutEnlargement=true&quality=90&fit=cover&width=${L}&height=${L}`,j=`${F.GET_USERS}?filter[username][_eq]=${o}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,E=`${F.GET_COMPANIES}?filter[owner][username][_eq]=${o}&fields=name`;N(async()=>{b.value=!0;try{let u=await fetch(j),i=await u.json();if(!u.ok||i.data.length==0)throw"Can't find a profile for this user";const g=i.data[0];t.value=g,w.value=t.value.userpic?`${S(t.value.userpic)}${C}`:null,d.value=g.related[0]?.hire,_.value=g.related[0]?.social,T.value=t.value.statement,u=await fetch(E),i=await u.json(),(!u.ok||i.data.length>0)&&(p.value=i.data[0].name)}catch(u){console.error(u)}finally{b.value=!1}});const V=y(()=>({city:t.value.location_city,country:t.value.location_country})),M=y(()=>{const u=[t.value.name,t.value.surname].filter(Boolean).join(" ");return u||null}),B=y(()=>"https://forum.vvvv.org/u/"+t.value.username+"/summary");return(u,i)=>(a(),x(f(z),{show:b.value},{default:k(()=>[t.value?(a(),n("div",ue,[e("div",ce,[e("div",de,[m(f(D),{objectFit:"contain",round:"",size:L,src:w.value},null,8,["src"]),e("div",ve,[e("h5",null,h(t.value.username),1),M.value?(a(),n("p",me,h(M.value),1)):r("",!0)]),m(W,{location:V.value},null,8,["location"]),e("p",fe,[e("a",{href:B.value},"Forum Profile",8,he)]),p.value?(a(),n("div",_e,[i[1]||(i[1]=e("div",null,"Owner of",-1)),e("a",{href:"/business/"+p.value,onClick:i[0]||(i[0]=g=>f(I)(p.value,g))},h(p.value),9,pe)])):r("",!0),_.value?(a(),x(Q,{key:1,class:"text-left mt-4 mb-4 pt-3 border-top",social:_.value,order:A},null,8,["social"])):r("",!0)]),e("div",ge,[T.value?(a(),n("div",be,[m(H,{text:t.value.statement,maxLength:255,clippedLength:100},null,8,["text"])])):r("",!0),d.value&&d.value.available?(a(),n("div",ye,[i[2]||(i[2]=e("h4",{class:"h4"},"Available for hire",-1)),e("div",xe,[m(re,{data:d.value},null,8,["data"])])])):r("",!0)])])])):r("",!0)]),_:1},8,["show"]))}};export{Me as default};
