import{r as c,aa as M,Z as o,_ as a,ab as x,$ as e,a5 as k,a4 as f,ac as u,ad as O,ae as h,H as v,b as y,af as $,a0 as H,a2 as m,ag as P,ah as R,a6 as U,ai as q,a1 as F,a7 as z,aj as G,ak as D,al as I}from"./app.js";import{N as K}from"./PerformantEllipsis.js";import{N as Z}from"./Space.js";import{_ as J}from"./SocialView.js";import{_ as Q}from"./Location.js";import"./Tooltip.js";import"./LocationOutline.js";const W=["innerHTML"],X=["innerHTML"],S={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(l){const s=["Show More","Show Less"],n=c(0),t=c(!1),d=c(l.text);M(()=>{l.text.length>l.maxLength&&(t.value=!0),d.value=l.text.trim()});function p(){n.value?n.value=0:n.value=1}return(w,b)=>(a(),o(v,null,[t.value&&n.value==0?(a(),x(f(K),{key:0,"line-clamp":"3"},{default:k(()=>[e("span",{innerHTML:l.text,tooltip:"false"},null,8,W)]),_:1})):(a(),o("span",{key:1,innerHTML:l.text,tooltip:"false"},null,8,X)),e("div",null,[t.value?(a(),o("a",{key:0,href:"#",onClick:O(p,["prevent"])},h(s[n.value]),1)):u("",!0)])],64))}},Y={class:"card-body"},ee={class:"row"},te={key:0,class:"col-12 col-lg-6"},ae=["src"],le={class:"col-12 col-lg-6"},se=["innerHTML"],oe=["innerHTML"],ne={class:"card-text"},ie="",re={__name:"HireView",props:{data:Object,contact:String},setup(l){const s=y(()=>l.data?{description:$(l.data.description),contact:l.data.contact,skills_vvvv:$(l.data.skills_vvvv),skills_other:$(l.data.skills_other),image:l.data.image?H(l.data.image)+ie:null,availableFor:l.data.availableFor?l.data.availableFor.map(n=>n.AvailableFor_Options_id?n.AvailableFor_Options_id.value:""):[]}:{});return(n,t)=>(a(),o("div",Y,[e("div",ee,[s.value.image?(a(),o("div",te,[e("img",{src:s.value.image,class:"img-fluid pt-2 mb-4"},null,8,ae),m(S,{text:s.value.description,maxLength:255,clippedLength:100},null,8,["text"])])):u("",!0),t[4]||(t[4]=e("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),e("div",le,[s.value.skills_vvvv?(a(),o(v,{key:0},[t[0]||(t[0]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"vvvv skills")],-1)),e("p",{class:"card-text",innerHTML:s.value.skills_vvvv},null,8,se)],64)):u("",!0),s.value.skills_other?(a(),o(v,{key:1},[t[1]||(t[1]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"other skills")],-1)),e("p",{class:"card-text",innerHTML:s.value.skills_other},null,8,oe)],64)):u("",!0),s.value.contact?(a(),o(v,{key:2},[t[2]||(t[2]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"contact")],-1)),e("p",ne,h(s.value.contact),1)],64)):u("",!0),s.value.availableFor.length>0?(a(),o(v,{key:3},[t[3]||(t[3]=e("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"Available for")],-1)),m(f(Z),null,{default:k(()=>[(a(!0),o(v,null,P(s.value.availableFor,d=>(a(),x(f(R),{class:"mr-2",bordered:!1},{default:k(()=>[U(h(d),1)]),_:2},1024))),256))]),_:1})],64)):u("",!0)])])]))}},ue={key:0,class:"userView"},ce={class:"row"},de={class:"col-12 col-md-6 col-lg-4 text-center mb-sm-4"},ve={class:"my-3"},me={key:0,class:"text-muted mb-1"},fe={class:"mb-1"},he=["href"],pe={key:0,class:"border-top pt-2 mt-4"},_e=["href"],ge={class:"col-12 col-md-6 col-lg-8"},be={key:0,class:"mb-4 statement"},ye={key:1},xe={class:"card"},L=120,Me={__name:"UserView",setup(l){const s=q();I();const n=s.params.username,t=c(null),d=c(null),p=c(null),w=c(null),b=c(!1),_=c(null),T=c(null),A=["contact","website","github","nuget","mastodon","pixelfed"],C=`?withoutEnlargement=true&quality=90&fit=cover&width=${L}&height=${L}`,j=`${F.GET_USERS}?filter[username][_eq]=${n}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,E=`${F.GET_COMPANIES}?filter[owner][username][_eq]=${n}&fields=name`;M(async()=>{b.value=!0;try{let i=await fetch(j),r=await i.json();if(!i.ok||r.data.length==0)throw"Can't find a profile for this user";const g=r.data[0];t.value=g,w.value=t.value.userpic?`${H(t.value.userpic)}${C}`:null,d.value=g.related[0]?.hire,p.value=g.related[0]?.social,T.value=t.value.statement,i=await fetch(E),r=await i.json(),console.log(i),(!i.ok||r.data.length>0)&&(_.value=r.data[0].name)}catch(i){console.error(i)}finally{b.value=!1}});const V=y(()=>({city:t.value.location_city,country:t.value.location_country})),N=y(()=>{const i=[t.value.name,t.value.surname].filter(Boolean).join(" ");return i||null}),B=y(()=>"https://forum.vvvv.org/u/"+t.value.username+"/summary");return(i,r)=>(a(),x(f(D),{show:b.value},{default:k(()=>[t.value?(a(),o("div",ue,[e("div",ce,[e("div",de,[m(f(z),{objectFit:"contain",round:"",size:L,src:w.value},null,8,["src"]),e("div",ve,[e("h5",null,h(t.value.username),1),N.value?(a(),o("p",me,h(N.value),1)):u("",!0)]),m(Q,{location:V.value},null,8,["location"]),e("p",fe,[e("a",{href:B.value},"Forum Profile",8,he)]),_.value?(a(),o("div",pe,[r[1]||(r[1]=e("div",null,"Owner of",-1)),e("a",{href:"/business/"+_.value,onClick:r[0]||(r[0]=g=>f(G)(_.value,g))},h(_.value),9,_e)])):u("",!0),p.value?(a(),x(J,{key:1,class:"text-left mt-4 mb-4 pt-3 border-top",social:p.value,order:A},null,8,["social"])):u("",!0)]),e("div",ge,[T.value?(a(),o("div",be,[m(S,{text:t.value.statement,maxLength:255,clippedLength:100},null,8,["text"])])):u("",!0),d.value&&d.value.available?(a(),o("div",ye,[r[2]||(r[2]=e("h4",{class:"h4"},"Available for hire",-1)),e("div",xe,[m(re,{data:d.value},null,8,["data"])])])):u("",!0)])])])):u("",!0)]),_:1},8,["show"]))}};export{Me as default};
