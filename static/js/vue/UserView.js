import{r as c,as as N,ab as s,ac as a,ah as k,ad as e,ai as x,ak as _,an as i,at as P,au as m,M as f,b as g,av as L,af as S,aj as h,aw as R,ax as U,aq as q,ay as z,ag as T,az as D,aA as G,aB as I,aC as K,al as J,aD as Q}from"./app.js";import{N as W,a as X}from"./Space.js";import{_ as Y}from"./SocialView.js";import{_ as Z}from"./Location.js";import"./LocationOutline.js";const ee=["innerHTML"],te=["innerHTML"],A={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(l){const n=["Show More","Show Less"],r=c(0),t=c(!1),d=c(l.text);N(()=>{l.text.length>l.maxLength&&(t.value=!0),d.value=l.text.trim()});function v(){r.value?r.value=0:r.value=1}return(w,y)=>(a(),s(f,null,[t.value&&r.value==0?(a(),k(_(W),{key:0,"line-clamp":"3",tooltip:"false"},{default:x(()=>[e("span",{innerHTML:l.text},null,8,ee)]),_:1})):(a(),s("span",{key:1,innerHTML:l.text},null,8,te)),e("div",null,[t.value?(a(),s("a",{key:0,href:"#",onClick:P(v,["prevent"])},m(n[r.value]),1)):i("",!0)])],64))}},ae={class:"card-body"},le={class:"row"},se={key:0,class:"col-12 col-lg-6"},ne=["src"],oe={class:"col-12 col-lg-6"},ie=["innerHTML"],re=["innerHTML"],ue={class:"card-text"},ce="",ve={__name:"HireView",props:{data:Object,contact:String},setup(l){const n=g(()=>l.data?{description:L(l.data.description),contact:l.data.contact,skills_vvvv:L(l.data.skills_vvvv),skills_other:L(l.data.skills_other),image:l.data.image?S(l.data.image)+ce:null,availableFor:l.data.availableFor?l.data.availableFor.map(r=>r.AvailableFor_Options_id?r.AvailableFor_Options_id.value:""):[]}:{});return(r,t)=>(a(),s("div",ae,[e("div",le,[n.value.image?(a(),s("div",se,[e("img",{src:n.value.image,class:"img-fluid pt-2 mb-4"},null,8,ne),h(A,{text:n.value.description,maxLength:255,clippedLength:100},null,8,["text"])])):i("",!0),t[4]||(t[4]=e("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),e("div",oe,[n.value.skills_vvvv?(a(),s(f,{key:0},[t[0]||(t[0]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"vvvv skills")],-1)),e("p",{class:"card-text",innerHTML:n.value.skills_vvvv},null,8,ie)],64)):i("",!0),n.value.skills_other?(a(),s(f,{key:1},[t[1]||(t[1]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"other skills")],-1)),e("p",{class:"card-text",innerHTML:n.value.skills_other},null,8,re)],64)):i("",!0),n.value.contact?(a(),s(f,{key:2},[t[2]||(t[2]=e("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"contact")],-1)),e("p",ue,m(n.value.contact),1)],64)):i("",!0),n.value.availableFor.length>0?(a(),s(f,{key:3},[t[3]||(t[3]=e("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[e("b",null,"Available for")],-1)),h(_(X),null,{default:x(()=>[(a(!0),s(f,null,R(n.value.availableFor,d=>(a(),k(_(U),{class:"mr-2",bordered:!1},{default:x(()=>[q(m(d),1)]),_:2},1024))),256))]),_:1})],64)):i("",!0)])])]))}},de={key:0,class:"userView"},me={class:"row"},fe={class:"col-12 col-md-6 col-lg-4 text-center mb-sm-4"},he={class:"my-3"},_e={key:0,class:"text-muted mb-1"},pe={class:"my-3"},be=["href"],ge={class:"my-1"},ye=["href"],ke={key:0,class:"border-top pt-2 mt-4"},xe=["href"],we={class:"col-12 col-md-6 col-lg-8"},$e={key:0,class:"mb-4 statement"},Le={key:1},Te={class:"card"},M=120,Ae={__name:"UserView",setup(l){const n=z();K();const r=n.params.username,t=c(null),d=c(null),v=c(null),w=c(null),y=c(!1),p=c(null),F=c(null),C=["contact","website","github","nuget","mastodon","pixelfed"],j=`?withoutEnlargement=true&quality=90&fit=cover&width=${M}&height=${M}`,B=`${T.GET_USERS}?filter[username][_eq]=${r}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,E=`${T.GET_COMPANIES}?filter[owner][username][_eq]=${r}&fields=name`;N(async()=>{y.value=!0;try{let o=await fetch(B),u=await o.json();if(!o.ok||u.data?.length==0)throw"Can't find a profile for this user";const b=u.data[0];t.value=b,w.value=t.value.userpic?`${S(t.value.userpic)}${j}`:null,d.value=b.related[0]?.hire,v.value=b.related[0]?.social,F.value=t.value.statement,o=await fetch(E),u=await o.json(),o.ok&&u.data?.length>0&&(p.value=u.data[0].name)}catch(o){console.error(o)}finally{y.value=!1}});const O=g(()=>({city:t.value.location_city,country:t.value.location_country})),H=g(()=>{const o=[t.value.name,t.value.surname].filter(Boolean).join(" ");return o||null}),V=g(()=>`${T.FORUM}u/${t.value.username}/summary`),$=g(()=>{let o=null;return v.value?.website&&v.value.website!==""&&(o={name:G(v.value.website),link:D(v.value.website)}),o});return(o,u)=>(a(),k(_(I),{show:y.value},{default:x(()=>[t.value?(a(),s("div",de,[e("div",me,[e("div",fe,[h(_(J),{objectFit:"contain",round:"",size:M,src:w.value},null,8,["src"]),e("div",he,[e("h5",null,m(t.value.username),1),H.value?(a(),s("p",_e,m(H.value),1)):i("",!0)]),h(Z,{location:O.value},null,8,["location"]),e("div",pe,[$.value?(a(),s("a",{key:0,href:$.value.link,target:"_blank"},m($.value.name),9,be)):i("",!0)]),e("p",ge,[e("a",{href:V.value,target:"_blank"},"Forum Profile",8,ye)]),p.value?(a(),s("div",ke,[u[1]||(u[1]=e("div",null,"Owner of",-1)),e("a",{href:"/business/"+p.value,onClick:u[0]||(u[0]=b=>_(Q)(p.value,b))},m(p.value),9,xe)])):i("",!0),v.value?(a(),k(Y,{key:1,class:"text-left mt-4 mb-4 pt-3 border-top",social:v.value,order:C},null,8,["social"])):i("",!0)]),e("div",we,[F.value?(a(),s("div",$e,[h(A,{text:t.value.statement,maxLength:255,clippedLength:100},null,8,["text"])])):i("",!0),d.value&&d.value.available?(a(),s("div",Le,[u[2]||(u[2]=e("h4",{class:"h4"},"Available for hire",-1)),e("div",Te,[h(ve,{data:d.value},null,8,["data"])])])):i("",!0)])])])):i("",!0)]),_:1},8,["show"]))}};export{Ae as default};
