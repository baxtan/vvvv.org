import{d as J,ae as n,af as s,av as K,r as v,ap as B,am as _,as as a,ah as m,ai as c,an as r,aw as Q,ax as f,M as $,b as y,ay as j,ac as H,ag as d,az as W,aA as X,au as b,aB as Z,aC as ee,aq as te,ad as w,aD as ae,aE as le,aF as se,ar as ne,aj as oe,aG as U,ak as A,aH as re}from"./app.js";import{N as ie}from"./Space.js";import{_ as ce}from"./SocialView.js";import{_ as ue}from"./Location.js";import{N as de}from"./PerformantEllipsis.js";import"./LocationOutline.js";const ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},me=J({name:"CalendarOutline",render:function(o,l){return s(),n("svg",ve,l[0]||(l[0]=[K('<rect fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" x="48" y="80" width="416" height="384" rx="48"></rect><circle cx="296" cy="232" r="24" fill="currentColor"></circle><circle cx="376" cy="232" r="24" fill="currentColor"></circle><circle cx="296" cy="312" r="24" fill="currentColor"></circle><circle cx="376" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="312" r="24" fill="currentColor"></circle><circle cx="216" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="392" r="24" fill="currentColor"></circle><circle cx="216" cy="392" r="24" fill="currentColor"></circle><circle cx="296" cy="392" r="24" fill="currentColor"></circle><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" stroke-linecap="round" d="M128 48v32"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" stroke-linecap="round" d="M384 48v32"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" d="M464 160H48"></path>',13)]))}}),fe=["innerHTML"],he=["innerHTML"],ge={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(t){const o=["Show More","Show Less"],l=v(0),e=v(!1),p=v(t.text);B(()=>{t.text.length>t.maxLength&&(e.value=!0),p.value=t.text.trim()});function h(){l.value?l.value=0:l.value=1}return(C,k)=>(s(),n($,null,[e.value&&l.value==0?(s(),_(c(de),{key:0,"line-clamp":"3",tooltip:"false"},{default:m(()=>[a("span",{innerHTML:t.text},null,8,fe)]),_:1})):(s(),n("span",{key:1,innerHTML:t.text},null,8,he)),a("div",null,[e.value?(s(),n("a",{key:0,href:"#",onClick:Q(h,["prevent"])},f(o[l.value]),1)):r("",!0)])],64))}},pe={class:"card-body"},ye=["src"],_e=["innerHTML"],be={class:"row"},ke={key:0,class:"col-12 col-lg-6"},xe={class:"pr-lg-2"},we=["innerHTML"],$e={key:1,class:"col-12 col-lg-6"},Ce={class:"pl-lg-2"},Le=["innerHTML"],Me={class:"card-text"},Te="",je={__name:"HireView",props:{data:Object,contact:String},setup(t){const o=y(()=>t.data?{description:j(t.data.description),contact:t.data.contact,skills_vvvv:j(t.data.skills_vvvv),skills_other:j(t.data.skills_other),image:t.data.image?H(t.data.image)+Te:null,availableFor:t.data.availableFor?t.data.availableFor.map(l=>l.AvailableFor_Options_id?l.AvailableFor_Options_id.value:""):[]}:{});return(l,e)=>(s(),n("div",pe,[o.value.image?(s(),n("img",{key:0,src:o.value.image,class:"img-fluid pt-2 mb-4"},null,8,ye)):r("",!0),o.value.description?(s(),n("p",{key:1,class:"card-text",innerHTML:o.value.description},null,8,_e)):r("",!0),e[4]||(e[4]=a("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),a("div",be,[o.value.skills_vvvv?(s(),n("div",ke,[a("div",xe,[e[0]||(e[0]=a("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[a("b",null,"vvvv skills")],-1)),a("p",{class:"card-text",innerHTML:o.value.skills_vvvv},null,8,we)])])):r("",!0),o.value.skills_vvvv?(s(),n("div",$e,[a("div",Ce,[e[1]||(e[1]=a("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[a("b",null,"other skills")],-1)),a("p",{class:"card-text",innerHTML:o.value.skills_other},null,8,Le)])])):r("",!0)]),o.value.contact?(s(),n($,{key:2},[e[2]||(e[2]=a("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[a("b",null,"contact")],-1)),a("p",Me,f(o.value.contact),1)],64)):r("",!0),o.value.availableFor.length>0?(s(),n($,{key:3},[e[3]||(e[3]=a("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[a("b",null,"Available for")],-1)),d(c(ie),null,{default:m(()=>[(s(!0),n($,null,W(o.value.availableFor,p=>(s(),_(c(X),{class:"mr-2",bordered:!1},{default:m(()=>[b(f(p),1)]),_:2},1024))),256))]),_:1})],64)):r("",!0)]))}},Fe={class:"joined border-top pt-3"},He={key:0},Ne={key:1},Se={__name:"BetaGammaUser",props:["data"],setup(t){return(o,l)=>(s(),n("div",Fe,[l[2]||(l[2]=a("p",{class:"joined mb-2"},"Using:",-1)),t.data.beta?(s(),n("div",He,[l[0]||(l[0]=b("beta since ")),a("b",null,f(t.data.beta),1)])):r("",!0),t.data.gamma?(s(),n("div",Ne,[l[1]||(l[1]=b("gamma since ")),a("b",null,f(t.data.gamma),1)])):r("",!0)]))}},Oe=["href"],Pe={class:"mb-1 d-flex text-align-center"},Ee=["href"],Ue={class:"mb-1"},Ae={__name:"PartOf",props:["data"],setup(t){return(o,l)=>(s(),n("div",null,[l[2]||(l[2]=a("div",{class:"mb-2"},"Part of",-1)),t.data.company?(s(),n("a",{key:0,href:"/business/"+t.data.company.name,onClick:l[0]||(l[0]=e=>c(Z)(t.data.company.name,e))},[a("div",Pe,f(t.data.company.name),1)],8,Oe)):r("",!0),t.data.edu?(s(),n("a",{key:1,href:"/edu/"+t.data.edu.name,onClick:l[1]||(l[1]=e=>c(ee)(t.data.edu.name,e))},[a("p",Ue,f(t.data.edu.name),1)],8,Ee)):r("",!0)]))}},Be={key:0,class:"userView"},Re={class:"row"},Ve={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},De={class:"my-3"},qe=["href"],Ge={key:0,class:"text-muted mb-1"},ze={class:"joined mb-2"},Ie={class:"col-12 col-md-6 col-lg-8"},Ye={key:0,class:"mb-4 description"},Je={key:1},Ke={class:"card"},F=120,at={__name:"UserView",setup(t){const o=te();ne();const l=o.params.username,e=v(null),p=v(null),h=v(null),C=v(null),k=v(!1),L=v(null),x=v({}),R=["contact","website","github","nuget","mastodon","pixelfed"],N=`?withoutEnlargement=true&quality=90&fit=cover&width=${F}&height=${F}`,V=`${w.GET_USERS}?filter[username][_eq]=${l}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,D=`${w.GET_COMPANIES}?filter[owner][username][_eq]=${l}&fields=name,logo`,q=`${w.GET_EDUS}?filter[owner][username][_eq]=${l}&fields=name,logo`;B(async()=>{k.value=!0;try{let i=await fetch(V),u=await i.json();if(!i.ok||u.data?.length==0)throw"Can't find a profile for this user";const g=u.data[0];document.title="Profile: "+g.username,e.value=g,C.value=e.value.userpic?`${H(e.value.userpic)}${N}`:null,p.value=g.related[0]?.hire,h.value=g.related[0]?.social,L.value=e.value.description;const Y=[S(D),S(q)],[M,T]=await Promise.allSettled(Y);M.status==="fulfilled"&&M.value&&(x.value.company=M.value),T.status==="fulfilled"&&T.value&&(x.value.edu=T.value)}catch(i){console.error(i)}finally{k.value=!1}});async function S(i){const u=await fetch(i),g=await u.json();return u.ok&&g.data?.length>0?{name:g.data[0].name,logo:g.data[0].logo?`${H(g.data[0].logo)}${N}`:null}:null}const G={year:"numeric",month:"short",day:"numeric"},z=y(()=>new Date(e.value.date_created).toLocaleString("en-US",G)),O=y(()=>({city:e.value.location_city,country:e.value.location_country})),P=y(()=>{const i=[e.value.name,e.value.surname].filter(Boolean).join(" ");return i||null}),I=y(()=>`${w.FORUM}u/${e.value.username}/summary`),E=y(()=>{const i={};return e.value.beta_since&&(i.beta=new Date(e.value.beta_since).getFullYear()),e.value.gamma_since&&(i.gamma=new Date(e.value.gamma_since).getFullYear()),i});return y(()=>{let i=null;return h.value?.website&&h.value.website!==""&&(i={name:le(h.value.website),link:ae(h.value.website)}),i}),(i,u)=>(s(),_(c(se),{show:k.value},{default:m(()=>[e.value?(s(),n("div",Be,[a("div",Re,[a("div",Ve,[d(c(oe),{objectFit:"contain",round:"",size:F,src:C.value},null,8,["src"]),a("div",De,[a("h5",null,[b(f(e.value.username)+" ",1),a("a",{href:I.value,target:"_blank",class:"pl-2",alt:"Forum Profile"},[d(c(U),{trigger:"hover"},{trigger:m(()=>[d(c(A),null,{default:m(()=>[d(c(re))]),_:1})]),default:m(()=>[u[0]||(u[0]=b(" Open Forum Profile "))]),_:1})],8,qe)]),P.value?(s(),n("p",Ge,f(P.value),1)):r("",!0)]),a("div",ze,[d(c(U),{trigger:"hover"},{trigger:m(()=>[d(c(A),{size:"1.2rem",class:"mr-2"},{default:m(()=>[d(c(me))]),_:1})]),default:m(()=>[u[1]||(u[1]=b(" Joined "))]),_:1}),b(" "+f(z.value),1)]),O.value?(s(),_(ue,{key:0,location:O.value},null,8,["location"])):r("",!0),Object.keys(x.value).length>0?(s(),_(Ae,{key:1,data:x.value,class:"border-top pt-2 mt-4"},null,8,["data"])):r("",!0),h.value?(s(),_(ce,{key:2,class:"mt-4 mb-4 pt-3 border-top",social:h.value,order:R},null,8,["social"])):r("",!0),E.value?(s(),_(Se,{key:3,data:E.value},null,8,["data"])):r("",!0)]),a("div",Ie,[L.value?(s(),n("div",Ye,[d(ge,{text:L.value,maxLength:255,clippedLength:100},null,8,["text"])])):r("",!0),p.value&&p.value.available?(s(),n("div",Je,[u[2]||(u[2]=a("h4",{class:"h4"},"Available for hire",-1)),a("div",Ke,[d(je,{data:p.value},null,8,["data"])])])):r("",!0)])])])):r("",!0)]),_:1},8,["show"]))}};export{at as default};
