import{aC as g,af as F,r as v,ao as _,ae as w,at as h,ab as i,aq as c,ac as l,ad as n,ag as d,as as u,aj as m,ai as r,M as y,au as b,ap as k,av as H,ak as N,am as p,az as C}from"./app.js";import{_ as S}from"./Location.js";import{N as x,a as E}from"./Space.js";import"./LocationOutline.js";const L=g("forHireList",{state:()=>({items:[],total:0,fetched:!1}),actions:{async fetch(a=!1){if(!(this.fetched&&!a))try{const{items:e,total:s}=await A();this.items=e,this.total=s,this.fetched=!0}catch{this.fetched=!1}}}}),j=F.GET_USERS+`?fields=*,related.social.contact,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value
&filter[related][hire][available][_eq]=true&sort=username&meta=filter_count`;async function A(){const a=await fetch(j),e=await a.json();if(a.ok)return{items:e.data.map(t=>{const o=[t.name,t.surname].filter(Boolean).join(" ");return{username:t.username,name:o??null,contact:t.related[0].social??null,location:{city:t.location_city,country:t.location_country},hire:t.related[0].hire??null}}),total:e.meta?.filter_count??0};throw Error("Connection Error")}const B={class:"imageContainer"},T=["src","alt"],$={class:"card-body"},M={class:"card-title"},O={class:"card-text"},U=["innerHTML"],V={key:0,class:"mt-2"},q={__name:"ForHireCard",props:{data:Object},setup(a){const e=v(null);return _(()=>{a.data.hire&&(e.value={description:h(a.data.hire.description),contact:a.data.hire.contact,skills_vvvv:h(a.data.hire.skills_vvvv),skills_other:h(a.data.hire.skills_other),image:a.data.hire.image?w(a.data.hire.image):null,availableFor:a.data.hire.availableFor?a.data.hire.availableFor.map(s=>s.AvailableFor_Options_id?s.AvailableFor_Options_id.value:""):[]})}),(s,t)=>e.value?(l(),i("div",{key:0,class:"card mb-5",onClick:t[0]||(t[0]=o=>r(p)(a.data.username,o))},[n("div",B,[e.value.image?(l(),i("img",{key:0,src:e.value.image,class:"card-img-top",alt:a.data.username},null,8,T)):c("",!0)]),n("div",$,[n("h4",M,u(a.data.username),1),n("p",O,u(a.data.title),1),d(r(x),{"line-clamp":"3",tooltip:!1},{default:m(()=>[n("span",{innerHTML:e.value.skills_vvvv},null,8,U)]),_:1}),e.value.availableFor.length>0?(l(),i("div",V,[d(r(E),null,{default:m(()=>[(l(!0),i(y,null,b(e.value.availableFor,o=>(l(),k(r(H),{bordered:!1},{default:m(()=>[N(u(o),1)]),_:2},1024))),256))]),_:1})])):c("",!0),d(S,{location:a.data.location,class:"border-top pt-2 mt-3"},null,8,["location"])])])):c("",!0)}},D={key:0},P={key:0},z={class:"row"},K={__name:"ForHireList",setup(a){const e=v(!0),s=L();return _(async()=>{try{e.value=!0,await s.fetch()}catch(t){console.log(t)}finally{e.value=!1}}),(t,o)=>(l(),k(r(C),{show:e.value},{default:m(()=>[!e.value&&r(s)?(l(),i("div",D,[r(s).total>0?(l(),i("p",P,"A list of "+u(r(s).total)+" professionals available for hire.",1)):c("",!0),n("div",z,[(l(!0),i(y,null,b(r(s).items,f=>(l(),i("div",{id:"UsersForHire",class:"col-md-6 col-lg-4 col-12",key:f.username},[d(q,{data:f},null,8,["data"])]))),128))])])):c("",!0)]),_:1},8,["show"]))}};export{K as default};
