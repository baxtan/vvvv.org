import{aE as g,ag as F,r as v,ao as _,af as w,av as h,ab as i,an as c,ac as r,ad as n,aj as d,au as u,ai as m,ak as l,M as y,aw as b,ah as k,ax as N,as as H,ar as p,aB as x}from"./app.js";import{_ as C}from"./Location.js";import{N as E}from"./PerformantEllipsis.js";import{N as S}from"./Space.js";import"./LocationOutline.js";const B=g("forHireList",{state:()=>({items:[],total:0,fetched:!1}),actions:{async fetch(a=!1){if(!(this.fetched&&!a))try{const{items:e,total:s}=await j();this.items=e,this.total=s,this.fetched=!0}catch{this.fetched=!1}}}}),L=F.GET_USERS+`?fields=*,related.social.contact,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value
&filter[related][hire][available][_eq]=true&sort=username&meta=filter_count`;async function j(){const a=await fetch(L),e=await a.json();if(a.ok)return{items:e.data.map(t=>{const o=[t.name,t.surname].filter(Boolean).join(" ");return{username:t.username,name:o??null,contact:t.related[0].social??null,location:{city:t.location_city,country:t.location_country},hire:t.related[0].hire??null}}),total:e.meta?.filter_count??0};throw Error("Connection Error")}const A={class:"imageContainer"},T=["src","alt"],$={class:"card-body"},M={class:"card-title"},O={class:"card-text"},U=["innerHTML"],V={key:0,class:"mt-2"},D={__name:"ForHireCard",props:{data:Object},setup(a){const e=v(null);return _(()=>{a.data.hire&&(e.value={description:h(a.data.hire.description),contact:a.data.hire.contact,skills_vvvv:h(a.data.hire.skills_vvvv),skills_other:h(a.data.hire.skills_other),image:a.data.hire.image?w(a.data.hire.image):null,availableFor:a.data.hire.availableFor?a.data.hire.availableFor.map(s=>s.AvailableFor_Options_id?s.AvailableFor_Options_id.value:""):[]})}),(s,t)=>e.value?(r(),i("div",{key:0,class:"card mb-5",onClick:t[0]||(t[0]=o=>l(p)(a.data.username,o))},[n("div",A,[e.value.image?(r(),i("img",{key:0,src:e.value.image,class:"card-img-top",alt:a.data.username},null,8,T)):c("",!0)]),n("div",$,[n("h4",M,u(a.data.username),1),n("p",O,u(a.data.title),1),d(l(E),{"line-clamp":"3",tooltip:"false"},{default:m(()=>[n("span",{innerHTML:e.value.skills_vvvv},null,8,U)]),_:1}),e.value.availableFor.length>0?(r(),i("div",V,[d(l(S),null,{default:m(()=>[(r(!0),i(y,null,b(e.value.availableFor,o=>(r(),k(l(N),{bordered:!1},{default:m(()=>[H(u(o),1)]),_:2},1024))),256))]),_:1})])):c("",!0),d(C,{location:a.data.location,class:"border-top pt-2 mt-3"},null,8,["location"])])])):c("",!0)}},P={key:0},q={key:0},G={class:"row"},Q={__name:"ForHireList",setup(a){const e=v(!0),s=B();return _(async()=>{try{e.value=!0,await s.fetch()}catch(t){console.log(t)}finally{e.value=!1}}),(t,o)=>(r(),k(l(x),{show:e.value},{default:m(()=>[!e.value&&l(s)?(r(),i("div",P,[l(s).total>0?(r(),i("p",q,"A list of "+u(l(s).total)+" professionals available for hire.",1)):c("",!0),n("div",G,[(r(!0),i(y,null,b(l(s).items,f=>(r(),i("div",{id:"UsersForHire",class:"col-md-6 col-lg-4 col-12",key:f.username},[d(D,{data:f},null,8,["data"])]))),128))])])):c("",!0)]),_:1},8,["show"]))}};export{Q as default};
