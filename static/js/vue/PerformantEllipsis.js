import{B as N,a as B,j as D,F as M,m as k,d as R,h as u,am as O,w as E,r as f,b as y,an as I,ao as v,ap as _}from"./app.js";import{t as A,d as H}from"./Tooltip.js";const F=N({name:"Ellipsis",common:B,peers:{Tooltip:A}}),S=D("ellipsis",{overflow:"hidden"},[M("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),k("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),k("cursor-pointer",`
 cursor: pointer;
 `)]);function h(i){return`${i}-ellipsis--line-clamp`}function C(i,l){return`${i}-ellipsis--cursor-${l}`}const $=Object.assign(Object.assign({},E.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),q=R({name:"Ellipsis",inheritAttrs:!1,props:$,slots:Object,setup(i,{slots:l,attrs:r}){const s=O(),a=E("Ellipsis","-ellipsis",S,F,i,s),g=f(null),o=f(null),c=f(null),p=f(!1),b=y(()=>{const{lineClamp:e}=i,{value:n}=p;return e!==void 0?{textOverflow:"","-webkit-line-clamp":n?"":e}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}});function T(){let e=!1;const{value:n}=p;if(n)return!0;const{value:t}=g;if(t){const{lineClamp:d}=i;if(P(t),d!==void 0)e=t.scrollHeight<=t.offsetHeight;else{const{value:w}=o;w&&(e=w.getBoundingClientRect().width<=t.getBoundingClientRect().width)}L(t,e)}return e}const x=y(()=>i.expandTrigger==="click"?()=>{var e;const{value:n}=p;n&&((e=c.value)===null||e===void 0||e.setShow(!1)),p.value=!n}:void 0);I(()=>{var e;i.tooltip&&((e=c.value)===null||e===void 0||e.setShow(!1))});const j=()=>u("span",Object.assign({},v(r,{class:[`${s.value}-ellipsis`,i.lineClamp!==void 0?h(s.value):void 0,i.expandTrigger==="click"?C(s.value,"pointer"):void 0],style:b.value}),{ref:"triggerRef",onClick:x.value,onMouseenter:i.expandTrigger==="click"?T:void 0}),i.lineClamp?l:u("span",{ref:"triggerInnerRef"},l));function P(e){if(!e)return;const n=b.value,t=h(s.value);i.lineClamp!==void 0?m(e,t,"add"):m(e,t,"remove");for(const d in n)e.style[d]!==n[d]&&(e.style[d]=n[d])}function L(e,n){const t=C(s.value,"pointer");i.expandTrigger==="click"&&!n?m(e,t,"add"):m(e,t,"remove")}function m(e,n,t){t==="add"?e.classList.contains(n)||e.classList.add(n):e.classList.contains(n)&&e.classList.remove(n)}return{mergedTheme:a,triggerRef:g,triggerInnerRef:o,tooltipRef:c,handleClick:x,renderTrigger:j,getTooltipDisabled:T}},render(){var i;const{tooltip:l,renderTrigger:r,$slots:s}=this;if(l){const{mergedTheme:a}=this;return u(H,Object.assign({ref:"tooltipRef",placement:"top"},l,{getDisabled:this.getTooltipDisabled,theme:a.peers.Tooltip,themeOverrides:a.peerOverrides.Tooltip}),{trigger:r,default:(i=s.tooltip)!==null&&i!==void 0?i:s.default})}else return r()}}),J=R({name:"PerformantEllipsis",props:$,inheritAttrs:!1,setup(i,{attrs:l,slots:r}){const s=f(!1),a=O();return _("-ellipsis",S,a),{mouseEntered:s,renderTrigger:()=>{const{lineClamp:o}=i,c=a.value;return u("span",Object.assign({},v(l,{class:[`${c}-ellipsis`,o!==void 0?h(c):void 0,i.expandTrigger==="click"?C(c,"pointer"):void 0],style:o===void 0?{textOverflow:"ellipsis"}:{"-webkit-line-clamp":o}}),{onMouseenter:()=>{s.value=!0}}),o?r:u("span",null,r))}}},render(){return this.mouseEntered?u(q,v({},this.$attrs,this.$props),this.$slots):this.renderTrigger()}});export{J as N,q as a,F as e};
