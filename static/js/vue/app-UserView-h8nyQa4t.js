import{r as v,O as A,h as n,o as l,a as p,g as t,f as m,b as r,Z as Y,K as o,_ as J,t as f,F as x,c as b,$ as H,G as S,j as d,l as K,a0 as Z,n as y,a1 as Q,a2 as W,a3 as X,d as ee,H as w,a4 as te,a5 as ae,s as le,u as se,I as ne,a6 as U,p as R,a7 as oe,a8 as ie}from"./app-profile-DxpktdD5.js";import{_ as ue}from"./app-SocialView-CiFkk2eo.js";import{_ as re}from"./app-Location-DA6Md2aj.js";const ce=["innerHTML"],de=["innerHTML"],ve={__name:"ClippedText",props:["text","maxLength","clippedLength"],setup(a){const i=["Show More","Show Less"],s=v(0),e=v(!1),_=v(a.text);A(()=>{a.text.length>a.maxLength&&(e.value=!0),_.value=a.text.trim()});function g(){s.value?s.value=0:s.value=1}return(L,k)=>(l(),n(x,null,[e.value&&s.value==0?(l(),p(r(Y),{key:0,"line-clamp":"3",tooltip:"false"},{default:m(()=>[t("span",{innerHTML:a.text},null,8,ce)]),_:1})):(l(),n("span",{key:1,innerHTML:a.text},null,8,de)),t("div",null,[e.value?(l(),n("a",{key:0,href:"#",onClick:J(g,["prevent"])},f(i[s.value]),1)):o("",!0)])],64))}},me={class:"card-body"},fe=["src"],ge=["innerHTML"],he={class:"row"},_e={key:0,class:"col-12 col-lg-6"},be={class:"pr-lg-2"},pe=["innerHTML"],ye={key:1,class:"col-12 col-lg-6"},ke={class:"pl-lg-2"},$e=["innerHTML"],we={class:"card-text"},xe="",Le={__name:"HireView",props:{data:Object,contact:String},setup(a){const i=b(()=>a.data?{description:H(a.data.description),contact:a.data.contact,skills_vvvv:H(a.data.skills_vvvv),skills_other:H(a.data.skills_other),image:a.data.image?S(a.data.image)+xe:null,availableFor:a.data.availableFor?a.data.availableFor.map(s=>s.AvailableFor_Options_id?s.AvailableFor_Options_id.value:""):[]}:{});return(s,e)=>(l(),n("div",me,[i.value.image?(l(),n("img",{key:0,src:i.value.image,class:"img-fluid pt-2 mb-4"},null,8,fe)):o("",!0),i.value.description?(l(),n("p",{key:1,class:"card-text",innerHTML:i.value.description},null,8,ge)):o("",!0),e[4]||(e[4]=t("hr",{class:"d-lg-none mt-3 mt-lg-0"},null,-1)),t("div",he,[i.value.skills_vvvv?(l(),n("div",_e,[t("div",be,[e[0]||(e[0]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"vvvv skills")],-1)),t("p",{class:"card-text",innerHTML:i.value.skills_vvvv},null,8,pe)])])):o("",!0),i.value.skills_vvvv?(l(),n("div",ye,[t("div",ke,[e[1]||(e[1]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"other skills")],-1)),t("p",{class:"card-text",innerHTML:i.value.skills_other},null,8,$e)])])):o("",!0)]),i.value.contact?(l(),n(x,{key:2},[e[2]||(e[2]=t("p",{class:"py-0 mb-0 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"contact")],-1)),t("p",we,f(i.value.contact),1)],64)):o("",!0),i.value.availableFor.length>0?(l(),n(x,{key:3},[e[3]||(e[3]=t("p",{class:"py-0 mb-2 text-muted font-weight-bold",style:{"font-variant-caps":"all-small-caps"}},[t("b",null,"Available for")],-1)),d(r(Q),null,{default:m(()=>[(l(!0),n(x,null,K(i.value.availableFor,_=>(l(),p(r(Z),{class:"mr-2",bordered:!1},{default:m(()=>[y(f(_),1)]),_:2},1024))),256))]),_:1})],64)):o("",!0)]))}},Te={class:"joined border-top pt-3"},Fe={key:0},Oe={key:1},He={__name:"BetaGammaUser",props:["data"],setup(a){return(i,s)=>(l(),n("div",Te,[s[2]||(s[2]=t("p",{class:"joined mb-2"},"Using:",-1)),a.data.beta?(l(),n("div",Fe,[s[0]||(s[0]=y("vvvv beta since ")),t("b",null,f(a.data.beta),1)])):o("",!0),a.data.gamma?(l(),n("div",Oe,[s[1]||(s[1]=y("vvvv gamma since ")),t("b",null,f(a.data.gamma),1)])):o("",!0)]))}},Me=["href"],Se={class:"mb-1 d-flex text-align-center"},je=["href"],Ne={class:"mb-1"},Pe={__name:"PartOf",props:["data"],setup(a){return(i,s)=>(l(),n("div",null,[s[2]||(s[2]=t("div",{class:"mb-2"},"Part of",-1)),a.data.company?(l(),n("a",{key:0,href:"/business/"+a.data.company.name,onClick:s[0]||(s[0]=e=>r(W)(a.data.company.name,e))},[t("div",Se,f(a.data.company.name),1)],8,Me)):o("",!0),a.data.edu?(l(),n("a",{key:1,href:"/edu/"+a.data.edu.name,onClick:s[1]||(s[1]=e=>r(X)(a.data.edu.name,e))},[t("p",Ne,f(a.data.edu.name),1)],8,je)):o("",!0)]))}},Ce={key:0,class:"userView"},Ee={class:"row"},Ue={class:"col-12 col-md-6 col-lg-4 mb-sm-4"},Re={class:"my-3"},Ae=["href"],Be={key:0,class:"text-muted mb-1"},Ve={class:"joined mb-2"},De={class:"col-12 col-md-6 col-lg-8"},qe={key:0,class:"mb-4 description"},Ge={key:1},ze={class:"card"},M=120,Ke={__name:"UserView",setup(a){const i=ee();se();const s=i.params.username,e=v(null),_=v(null),g=v(null),L=v(null),k=v(!1),T=v(null),$=v({}),j=`?withoutEnlargement=true&quality=90&fit=cover&width=${M}&height=${M}`,B=`${w.GET_USERS}?filter[username][_eq]=${s}
            &fields=*,related.hire.*,related.hire.availableFor.AvailableFor_Options_id.value,related.social.*`,V=`${w.GET_COMPANIES}?filter[owner][username][_eq]=${s}&fields=name,logo`,D=`${w.GET_EDUS}?filter[owner][username][_eq]=${s}&fields=name,logo`;A(async()=>{k.value=!0;try{let u=await fetch(B),c=await u.json();if(!u.ok||c.data?.length==0)throw"Can't find a profile for this user";const h=c.data[0];document.title="Profile: "+h.username,e.value=h,L.value=e.value.userpic?`${S(e.value.userpic)}${j}`:null,_.value=h.related[0]?.hire,g.value=h.related[0]?.social,T.value=e.value.description;const I=[N(V),N(D)],[F,O]=await Promise.allSettled(I);F.status==="fulfilled"&&F.value&&($.value.company=F.value),O.status==="fulfilled"&&O.value&&($.value.edu=O.value)}catch(u){console.error(u)}finally{k.value=!1}});async function N(u){const c=await fetch(u),h=await c.json();return c.ok&&h.data?.length>0?{name:h.data[0].name,logo:h.data[0].logo?`${S(h.data[0].logo)}${j}`:null}:null}const q={year:"numeric",month:"short",day:"numeric"},G=b(()=>new Date(e.value.date_created).toLocaleString("en-US",q)),P=b(()=>({city:e.value.location_city,country:e.value.location_country})),C=b(()=>{const u=[e.value.name,e.value.surname].filter(Boolean).join(" ");return u||null}),z=b(()=>`${w.FORUM}u/${e.value.username}/summary`),E=b(()=>{const u={};return e.value.beta_since&&(u.beta=new Date(e.value.beta_since).getFullYear()),e.value.gamma_since&&(u.gamma=new Date(e.value.gamma_since).getFullYear()),Object.keys(u).length>0?u:null});return b(()=>{let u=null;return g.value?.website&&g.value.website!==""&&(u={name:ae(g.value.website),link:te(g.value.website)}),u}),(u,c)=>(l(),p(r(le),{show:k.value},{default:m(()=>[e.value?(l(),n("div",Ce,[t("div",Ee,[t("div",Ue,[d(r(ne),{objectFit:"contain",round:"",size:M,src:L.value},null,8,["src"]),t("div",Re,[t("h5",null,[y(f(e.value.username)+" ",1),t("a",{href:z.value,target:"_blank",class:"pl-2",alt:"Forum Profile"},[d(r(U),{trigger:"hover"},{trigger:m(()=>[d(r(R),null,{default:m(()=>[d(r(oe))]),_:1})]),default:m(()=>[c[0]||(c[0]=y(" Open Forum Profile "))]),_:1})],8,Ae)]),C.value?(l(),n("p",Be,f(C.value),1)):o("",!0)]),t("div",Ve,[d(r(U),{trigger:"hover"},{trigger:m(()=>[d(r(R),{size:"1.2rem",class:"mr-2"},{default:m(()=>[d(r(ie))]),_:1})]),default:m(()=>[c[1]||(c[1]=y(" Joined "))]),_:1}),y(" "+f(G.value),1)]),P.value?(l(),p(re,{key:0,location:P.value},null,8,["location"])):o("",!0),Object.keys($.value).length>0?(l(),p(Pe,{key:1,data:$.value,class:"border-top pt-2 mt-4"},null,8,["data"])):o("",!0),g.value?(l(),p(ue,{key:2,class:"mt-4 mb-4 pt-3 border-top",social:g.value},null,8,["social"])):o("",!0),E.value?(l(),p(He,{key:3,data:E.value},null,8,["data"])):o("",!0)]),t("div",De,[T.value?(l(),n("div",qe,[d(ve,{text:T.value,maxLength:255,clippedLength:100},null,8,["text"])])):o("",!0),_.value&&_.value.available?(l(),n("div",Ge,[c[2]||(c[2]=t("h4",{class:"h4"},"Available for hire",-1)),t("div",ze,[d(Le,{data:_.value},null,8,["data"])])])):o("",!0)])])])):o("",!0)]),_:1},8,["show"]))}};export{Ke as default};
