import{ad as B,ae as A,av as I,r as y,an as L,as as N,b as _,aA as E,aB as H,ao as w,ai as v,aa as o,ap as t,ac as s,ar as n,af as u,ah as i,am as g,aC as M,aj as V,aD as R,al as S,ax as T,ab as a}from"./app.js";import{_ as U}from"./SocialView.js";import{L as j}from"./LocationOutline.js";const D="?withoutEnlargement=true&quality=90&fit=cover&width=120",P=A.BASEURL+"items/Company?fields=*,social.*,owner.username&filter[name][_eq]=";async function q(m){const f=P+m,e=await(await fetch(f)).json();if(e.data.length==0)throw"Can't find a profile for this company";const l={...e.data[0]};return l.logo=l?.logo?B(l.logo)+D:null,l}const z={key:0},F={class:"row"},G={class:"col-12 col-md-6 col-lg-4 text-center mb-sm-4"},K={class:"text-center mb-3"},O=["src"],$={class:"my-3"},J={key:1,class:"address mb-3"},Q={key:0},W={key:1},X={key:2},Y={key:3},Z=["href"],ee={key:3,class:"maintained mt-4 pt-3 border-top"},ae=["href"],te={class:"col-12 col-md-6 col-lg-8"},oe=["innerHTML"],ie={__name:"BusinessView",setup(m){const p=I().params.name,e=y(null),l=y(!1);let h;const k=["website","github","nuget","mastodon","pixelfed"];L(async()=>{l.value=!0,e.value=await q(p),l.value=!1,h=N(e.value.description)});const d=_(()=>{let c=null;return e.value.social&&e.value.social?.website!==""&&(c={name:H(e.value.social.website),link:E(e.value.social.website)}),c});_(()=>({city:e.value.location_city,country:e.value.location_country}));const b=["location_street","location_additionalInfo","location_postalcode","location_country","location_city"],x=_(()=>b.some(c=>e.value&&e.value[c]));return(c,r)=>(a(),w(i(T),{show:l.value},{default:v(()=>[e.value?(a(),o("div",z,[s("div",F,[s("div",G,[s("div",K,[e.value.logo?(a(),o("img",{key:0,src:e.value.logo,alt:"logo",class:"img-fluid"},null,8,O)):t("",!0),s("div",$,[s("h5",null,n(e.value.name),1)]),x.value?(a(),o("div",J,[u(i(g),{class:"mb-2"},{default:v(()=>[u(i(j))]),_:1}),e.value.location_street?(a(),o("div",Q,n(e.value.location_street),1)):t("",!0),e.value.location_additionalInfo?(a(),o("div",W,n(e.value.location_additionalInfo),1)):t("",!0),e.value.location_postalcode||e.value.location_city?(a(),o("div",X,n(e.value.location_postalcode)+" "+n(e.value.location_city),1)):t("",!0),e.value.location_country?(a(),o("div",Y,n(i(M)(e.value.location_country)),1)):t("",!0)])):t("",!0),d.value?(a(),o("a",{key:2,href:d.value.link},n(d.value.name),9,Z)):t("",!0),e.value.owner?(a(),o("div",ee,[r[1]||(r[1]=V(" This page is maintained by: ")),s("div",null,[u(i(g),{size:"20",class:"mr-2"},{default:v(()=>[u(i(R))]),_:1}),s("a",{href:"/user/"+e.value.owner.username,onClick:r[0]||(r[0]=C=>i(S)(e.value.owner.username,C))},n(e.value.owner.username),9,ae)])])):t("",!0),e.value.social?(a(),w(U,{key:4,class:"text-left mt-4 mb-4 pt-3 border-top",social:e.value.social,order:k},null,8,["social"])):t("",!0)])]),s("div",te,[s("p",{innerHTML:i(h)},null,8,oe)])])])):t("",!0)]),_:1},8,["show"]))}};export{ie as default};
