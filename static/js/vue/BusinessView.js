import{a4 as B,a5 as I,ae as L,r as y,af as N,ap as A,b as _,aq as E,ar as H,ag as w,a9 as v,a8 as n,ah as M,a2 as a,a1 as o,aj as t,a3 as s,ak as i,a6 as u,ad as g,ao as V,aa as R,as as S,ac as T}from"./app.js";import{_ as U}from"./SocialView.js";import{L as j}from"./LocationOutline.js";const q="?withoutEnlargement=true&quality=90&fit=cover&width=120",P=I.BASEURL+"items/Company?fields=*,social.*,owner.username&filter[name][_eq]=";async function D(m){const f=P+m,e=await(await fetch(f)).json();if(e.data.length==0)throw"Can't find a profile for this company";const l={...e.data[0]};return l.logo=l?.logo?B(l.logo)+q:null,l}const z={key:0},F={class:"row"},G={class:"col-12 col-md-6 col-lg-3 text-center mb-sm-4"},K={class:"text-center mb-3"},O=["src"],$={class:"my-3"},J={key:1,class:"address mb-3"},Q={key:0},W={key:1},X={key:2},Y={key:3},Z=["href"],ee={key:3,class:"maintained mt-4 pt-3 border-top"},ae=["href"],te={class:"col-12 col-md-6 col-lg-9"},oe=["innerHTML"],ie={__name:"BusinessView",setup(m){const p=L().params.name,e=y(null),l=y(!1);let h;const k=["website","github","nuget","mastodon","pixelfed"];N(async()=>{l.value=!0,e.value=await D(p),l.value=!1,h=A(e.value.description)});const d=_(()=>{let c=null;return e.value.social&&e.value.social?.website!==""&&(c={name:H(e.value.social.website),link:E(e.value.social.website)}),c});_(()=>({city:e.value.location_city,country:e.value.location_country}));const b=["location_street","location_additionalInfo","location_postalcode","location_country","location_city"],x=_(()=>b.some(c=>e.value&&e.value[c]));return(c,r)=>(a(),w(n(M),{show:l.value},{default:v(()=>[e.value?(a(),o("div",z,[s("div",F,[s("div",G,[s("div",K,[e.value.logo?(a(),o("img",{key:0,src:e.value.logo,alt:"logo",class:"img-fluid"},null,8,O)):t("",!0),s("div",$,[s("h5",null,i(e.value.name),1)]),x.value?(a(),o("div",J,[u(n(g),{class:"mb-2"},{default:v(()=>[u(n(j))]),_:1}),e.value.location_street?(a(),o("div",Q,i(e.value.location_street),1)):t("",!0),e.value.location_additionalInfo?(a(),o("div",W,i(e.value.location_additionalInfo),1)):t("",!0),e.value.location_postalcode||e.value.location_city?(a(),o("div",X,i(e.value.location_postalcode)+" "+i(e.value.location_city),1)):t("",!0),e.value.location_country?(a(),o("div",Y,i(n(V)(e.value.location_country)),1)):t("",!0)])):t("",!0),d.value?(a(),o("a",{key:2,href:d.value.link},i(d.value.name),9,Z)):t("",!0),e.value.owner?(a(),o("div",ee,[r[1]||(r[1]=R(" This page is maintained by: ")),s("div",null,[u(n(g),{size:"20",class:"mr-2"},{default:v(()=>[u(n(S))]),_:1}),s("a",{href:"/user/"+e.value.owner.username,onClick:r[0]||(r[0]=C=>n(T)(e.value.owner.username,C))},i(e.value.owner.username),9,ae)])])):t("",!0)])]),s("div",te,[e.value.social?(a(),w(U,{key:0,class:"text-left mb-4",social:e.value.social,order:k},null,8,["social"])):t("",!0),s("p",{innerHTML:n(h)},null,8,oe)])])])):t("",!0)]),_:1},8,["show"]))}};export{ie as default};
