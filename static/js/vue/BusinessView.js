import{a0 as B,a1 as I,ai as L,r as h,aa as N,af as A,b as _,as as E,at as H,ab as w,a5 as v,Z as o,ac as a,$ as s,ae as n,a2 as u,a4 as i,a9 as g,ar as M,a6 as V,au as R,a8 as S,ak as T,_ as t}from"./app.js";import{_ as U}from"./SocialView.js";import{L as P}from"./LocationOutline.js";const j="?withoutEnlargement=true&quality=90&fit=cover&width=120",q=I.BASEURL+"items/Company?fields=*,social.*,owner.username&filter[name][_eq]=";async function D(m){const f=q+m,e=await(await fetch(f)).json();if(e.data.length==0)throw"Can't find a profile for this company";const l={...e.data[0]};return l.logo=l?.logo?B(l.logo)+j:null,l}const $={key:0},z={class:"row"},F={class:"col-12 col-md-6 col-lg-4 text-center mb-sm-4"},G={class:"text-center mb-3"},K=["src"],O={class:"my-3"},Z={key:1,class:"address mb-3"},J={key:0},Q={key:1},W={key:2},X={key:3},Y=["href"],ee={key:3,class:"maintained mt-4 pt-3 border-top"},te=["href"],ae={class:"col-12 col-md-6 col-lg-8"},oe=["innerHTML"],ie={__name:"BusinessView",setup(m){const p=L().params.name,e=h(null),l=h(!1);let y;const k=["website","github","nuget","mastodon","pixelfed"];N(async()=>{l.value=!0,e.value=await D(p),l.value=!1,y=A(e.value.description)});const d=_(()=>{let c=null;return e.value.social&&e.value.social?.website!==""&&(c={name:H(e.value.social.website),link:E(e.value.social.website)}),c});_(()=>({city:e.value.location_city,country:e.value.location_country}));const b=["location_street","location_additionalInfo","location_postalcode","location_country","location_city"],x=_(()=>b.some(c=>e.value&&e.value[c]));return(c,r)=>(t(),w(i(T),{show:l.value},{default:v(()=>[e.value?(t(),o("div",$,[s("div",z,[s("div",F,[s("div",G,[e.value.logo?(t(),o("img",{key:0,src:e.value.logo,alt:"logo",class:"img-fluid"},null,8,K)):a("",!0),s("div",O,[s("h5",null,n(e.value.name),1)]),x.value?(t(),o("div",Z,[u(i(g),{class:"mb-2"},{default:v(()=>[u(i(P))]),_:1}),e.value.location_street?(t(),o("div",J,n(e.value.location_street),1)):a("",!0),e.value.location_additionalInfo?(t(),o("div",Q,n(e.value.location_additionalInfo),1)):a("",!0),e.value.location_postalcode||e.value.location_city?(t(),o("div",W,n(e.value.location_postalcode)+" "+n(e.value.location_city),1)):a("",!0),e.value.location_country?(t(),o("div",X,n(i(M)(e.value.location_country)),1)):a("",!0)])):a("",!0),d.value?(t(),o("a",{key:2,href:d.value.link},n(d.value.name),9,Y)):a("",!0),e.value.owner?(t(),o("div",ee,[r[1]||(r[1]=V(" This page is maintained by: ")),s("div",null,[u(i(g),{size:"20",class:"mr-2"},{default:v(()=>[u(i(R))]),_:1}),s("a",{href:"/user/"+e.value.owner.username,onClick:r[0]||(r[0]=C=>i(S)(e.value.owner.username,C))},n(e.value.owner.username),9,te)])])):a("",!0),e.value.social?(t(),w(U,{key:4,class:"text-left mt-4 mb-4 pt-3 border-top",social:e.value.social,order:k},null,8,["social"])):a("",!0)])]),s("div",ae,[s("p",{innerHTML:i(y)},null,8,oe)])])])):a("",!0)]),_:1},8,["show"]))}};export{ie as default};
